<HTML>
<HEAD>
<TITLE>D:\Pfc\Src\oaidtb\gui\InstancesEditingPanel.java</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="KEYWORDS" CONTENT="IntelliJ_IDEA_Html">
</HEAD>
<BODY BGCOLOR="#d3d2aa">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#C0C0C0" >
<TR><TD><CENTER>
<FONT FACE="Arial,Helvetica" COLOR="#000000">
D:\Pfc\Src\oaidtb\gui\InstancesEditingPanel.java</FONT>
</center></TD></TR></TABLE></FONT>
<PRE>

<FONT COLOR=0 STYLE="font-style:normal">1    </FONT><FONT COLOR="#808080"><I>/* 
<FONT COLOR=0 STYLE="font-style:normal">2    </FONT> *    This program is free software; you can redistribute it and/or modify 
<FONT COLOR=0 STYLE="font-style:normal">3    </FONT> *    it under the terms of the GNU General Public License as published by 
<FONT COLOR=0 STYLE="font-style:normal">4    </FONT> *    the Free Software Foundation; either version 2 of the License, or 
<FONT COLOR=0 STYLE="font-style:normal">5    </FONT> *    (at your option) any later version. 
<FONT COLOR=0 STYLE="font-style:normal">6    </FONT> * 
<FONT COLOR=0 STYLE="font-style:normal">7    </FONT> *    This program is distributed in the hope that it will be useful, 
<FONT COLOR=0 STYLE="font-style:normal">8    </FONT> *    but WITHOUT ANY WARRANTY; without even the implied warranty of 
<FONT COLOR=0 STYLE="font-style:normal">9    </FONT> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
<FONT COLOR=0 STYLE="font-style:normal">10   </FONT> *    GNU General Public License for more details. 
<FONT COLOR=0 STYLE="font-style:normal">11   </FONT> * 
<FONT COLOR=0 STYLE="font-style:normal">12   </FONT> *    You should have received a copy of the GNU General Public License 
<FONT COLOR=0 STYLE="font-style:normal">13   </FONT> *    along with this program; if not, write to the Free Software 
<FONT COLOR=0 STYLE="font-style:normal">14   </FONT> *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA. 
<FONT COLOR=0 STYLE="font-style:normal">15   </FONT> */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">16   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">17   </FONT></FONT><FONT COLOR="#808080"><I>/* 
<FONT COLOR=0 STYLE="font-style:normal">18   </FONT> *    InstancesEditingPanel.java 
<FONT COLOR=0 STYLE="font-style:normal">19   </FONT> *    Copyright (C) 2002 Santiago David Villalba 
<FONT COLOR=0 STYLE="font-style:normal">20   </FONT> * 
<FONT COLOR=0 STYLE="font-style:normal">21   </FONT> */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">22   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">23   </FONT></FONT><FONT COLOR="#000080"><B>package</B></FONT><FONT COLOR="#000000"> oaidtb.gui; 
<FONT COLOR=0 STYLE="font-style:normal">24   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">25   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> com.sun.image.codec.jpeg.JPEGCodec; 
<FONT COLOR=0 STYLE="font-style:normal">26   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> com.sun.image.codec.jpeg.JPEGEncodeParam; 
<FONT COLOR=0 STYLE="font-style:normal">27   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> com.sun.image.codec.jpeg.JPEGImageEncoder; 
<FONT COLOR=0 STYLE="font-style:normal">28   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\GenericObjectEditor.java.html">oaidtb.gui.customizedWeka.GenericObjectEditor</A>; 
<FONT COLOR=0 STYLE="font-style:normal">29   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\PropertyPanel.java.html">oaidtb.gui.customizedWeka.PropertyPanel</A>; 
<FONT COLOR=0 STYLE="font-style:normal">30   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\guiUtils\IntegerDocument.java.html">oaidtb.misc.guiUtils.IntegerDocument</A>; 
<FONT COLOR=0 STYLE="font-style:normal">31   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\guiUtils\LabeledSlider.java.html">oaidtb.misc.guiUtils.LabeledSlider</A>; 
<FONT COLOR=0 STYLE="font-style:normal">32   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\SimpleInteger.java.html">oaidtb.misc.SimpleInteger</A>; 
<FONT COLOR=0 STYLE="font-style:normal">33   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImageFileView.java.html">oaidtb.misc.javaTutorial.ImageFileView</A>; 
<FONT COLOR=0 STYLE="font-style:normal">34   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImageFilter.java.html">oaidtb.misc.javaTutorial.ImageFilter</A>; 
<FONT COLOR=0 STYLE="font-style:normal">35   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImagePreview.java.html">oaidtb.misc.javaTutorial.ImagePreview</A>; 
<FONT COLOR=0 STYLE="font-style:normal">36   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Arbitrable.java.html">oaidtb.misc.mediator.Arbitrable</A>; 
<FONT COLOR=0 STYLE="font-style:normal">37   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Colleague.java.html">oaidtb.misc.mediator.Colleague</A>; 
<FONT COLOR=0 STYLE="font-style:normal">38   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Mediator.java.html">oaidtb.misc.mediator.Mediator</A>; 
<FONT COLOR=0 STYLE="font-style:normal">39   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">oaidtb.misc.pointDistributions.PointDistribution</A>; 
<FONT COLOR=0 STYLE="font-style:normal">40   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> weka.core.FastVector; 
<FONT COLOR=0 STYLE="font-style:normal">41   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> weka.core.Instance; 
<FONT COLOR=0 STYLE="font-style:normal">42   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> weka.core.Instances; 
<FONT COLOR=0 STYLE="font-style:normal">43   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> weka.gui.ExtensionFileFilter; 
<FONT COLOR=0 STYLE="font-style:normal">44   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">45   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> javax.swing.*; 
<FONT COLOR=0 STYLE="font-style:normal">46   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.awt.*; 
<FONT COLOR=0 STYLE="font-style:normal">47   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.awt.event.*; 
<FONT COLOR=0 STYLE="font-style:normal">48   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.awt.image.BufferedImage; 
<FONT COLOR=0 STYLE="font-style:normal">49   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.awt.image.ImageObserver; 
<FONT COLOR=0 STYLE="font-style:normal">50   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.awt.image.PixelGrabber; 
<FONT COLOR=0 STYLE="font-style:normal">51   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.beans.PropertyChangeEvent; 
<FONT COLOR=0 STYLE="font-style:normal">52   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.beans.PropertyChangeListener; 
<FONT COLOR=0 STYLE="font-style:normal">53   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.io.*; 
<FONT COLOR=0 STYLE="font-style:normal">54   </FONT></FONT><FONT COLOR="#000080"><B>import</B></FONT><FONT COLOR="#000000"> java.util.ArrayList; 
<FONT COLOR=0 STYLE="font-style:normal">55   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">56   </FONT></FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">57   </FONT> * Panel que permite seleccionar los modos en que introducimos nuevas instancias 
<FONT COLOR=0 STYLE="font-style:normal">58   </FONT> * en un {</I></FONT><FONT COLOR="#808080"><B>@link</B></FONT><FONT COLOR="#808080"><I> <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances</A>}, posiblemente interactivamente a través de un 
<FONT COLOR=0 STYLE="font-style:normal">59   </FONT> * {</I></FONT><FONT COLOR="#808080"><B>@link</B></FONT><FONT COLOR="#808080"><I> <A href="..\..\oaidtb\gui\DrawingPanel.java.html">DrawingPanel</A>}. Permite rehacer/deshacer las inserciones, cargar y salvar 
<FONT COLOR=0 STYLE="font-style:normal">60   </FONT> * a ficheros y entrar en modo zoom. 
<FONT COLOR=0 STYLE="font-style:normal">61   </FONT> * 
<FONT COLOR=0 STYLE="font-style:normal">62   </FONT> * </I></FONT><FONT COLOR="#808080"><B>@author</B></FONT><FONT COLOR="#808080"><I> </I></FONT><FONT COLOR="#808080"><I>&LT;a</I></FONT><FONT COLOR="#808080"><I> href="mailto:sdvb@wanadoo.es"</I></FONT><FONT COLOR="#808080"><I>&GT;</I></FONT><FONT COLOR="#808080"><I>Santiago David Villalba Bartolom&eacute;</I></FONT><FONT COLOR="#808080"><I>&LT;/a&GT;</I></FONT><FONT COLOR="#808080"><I> 
<FONT COLOR=0 STYLE="font-style:normal">63   </FONT> * </I></FONT><FONT COLOR="#808080"><B>@version</B></FONT><FONT COLOR="#808080"><I> $Revision: 1.0 $ 
<FONT COLOR=0 STYLE="font-style:normal">64   </FONT> */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">65   </FONT></FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>class</B></FONT><FONT COLOR="#000000"> InstancesEditingPanel </FONT><FONT COLOR="#000080"><B>extends</B></FONT><FONT COLOR="#000000"> JPanel </FONT><FONT COLOR="#000080"><B>implements</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Arbitrable.java.html">Arbitrable</A>{ 
<FONT COLOR=0 STYLE="font-style:normal">66   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">67   </FONT>  </FONT><FONT COLOR="#808080"><I>//El panel de dibujado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">68   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\DrawingPanel.java.html">DrawingPanel</A> m_DrawingPanel; 
<FONT COLOR=0 STYLE="font-style:normal">69   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">70   </FONT>  </FONT><FONT COLOR="#808080"><I>//Las instancias que representan a los puntos (y viceversa)</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">71   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances</A> m_Points; 
<FONT COLOR=0 STYLE="font-style:normal">72   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">73   </FONT>  </FONT><FONT COLOR="#808080"><I>//Undo & Redo points insertion features</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">74   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Log del número de instancias añadidas con cada click del ratón 
<FONT COLOR=0 STYLE="font-style:normal">75   </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">76   </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">77   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> ArrayList m_NumberOfInserted = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ArrayList(); 
<FONT COLOR=0 STYLE="font-style:normal">78   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Log de las instancias eliminadas en cada operación de undo */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">79   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> ArrayList m_RedoBuffer = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ArrayList(); 
<FONT COLOR=0 STYLE="font-style:normal">80   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">81   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón de undo */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">82   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_UndoButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Undo"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">83   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón de redo */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">84   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_RedoButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Redo"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">85   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para vaciar la memoria reservada para realizar las operaciones de undo & redo */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">86   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_FlushButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Flush buffer"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">87   </FONT>  </FONT><FONT COLOR="#808080"><I>/** Simplemente borrar las instancias al hacer undo o repintar todo el panel */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">88   </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JCheckBox m_FastEraseMode = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Fast erase mode"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">89   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">90   </FONT>  </FONT><FONT COLOR="#808080"><I>//Buttons to assign colors to left and right mouse buttons</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">91   </FONT>  </FONT><FONT COLOR="#808080"><I>/** El color asignado a las pulsaciones del botón izquierdo del ratón */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">92   </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> JButton m_Color1Button = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(); 
<FONT COLOR=0 STYLE="font-style:normal">93   </FONT>  </FONT><FONT COLOR="#808080"><I>/** El color asignado a las pulsaciones del botón derecho del ratón */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">94   </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> JButton m_Color2Button = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(); 
<FONT COLOR=0 STYLE="font-style:normal">95   </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">96   </FONT>  </FONT><FONT COLOR="#808080"><I>//Selectores de color a asignar a cada botón del ratón</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">97   </FONT>  </FONT><FONT COLOR="#808080"><I>/** El selector de color */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">98   </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> JColorChooser m_ColorChooser = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JColorChooser(); 
<FONT COLOR=0 STYLE="font-style:normal">99   </FONT>  </FONT><FONT COLOR="#808080"><I>/** El panel que contiene el historial de colores existentes en la base de datos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">100  </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\ColorHistoryPanel.java.html">ColorHistoryPanel</A> m_ColorHistory; 
<FONT COLOR=0 STYLE="font-style:normal">101  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">102  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Borrar las enstancias de la base de datos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">103  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_ResetButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Reset"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">104  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">105  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para partir las instancias en conjuntos de entrenamiento y de test */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">106  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_SplitButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Split"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">107  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para unir las instancias de test que existan con las de test */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">108  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_JoinButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Join"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">109  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Configuara el porcentaje de instancias en cada conjunto en la siguiente partición */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">110  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\guiUtils\LabeledSlider.java.html">LabeledSlider</A> m_TrainPercentageLS = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\guiUtils\LabeledSlider.java.html">LabeledSlider</A>(</FONT><FONT COLOR="#008000"><B>"Train percentage: "</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">111  </FONT>  </FONT><FONT COLOR="#808080"><I>/** A la hora de crear los conjuntos de netrenamiento de y de test, usar sólo las instancias visibles */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">112  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JCheckBox m_UseOnlyInstancesInRegionCB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Use only visible instances"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">113  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">114  </FONT>  </FONT><FONT COLOR="#808080"><I>//Load & Save components</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">115  </FONT>  </FONT><FONT COLOR="#808080"><I>/** El selector de ficheros para seleccionar archivos con extensión ARFF */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">116  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JFileChooser m_FileChooser = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JFileChooser(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> File(System.getProperty(</FONT><FONT COLOR="#008000"><B>"user.dir"</B></FONT><FONT COLOR="#000000">))); 
<FONT COLOR=0 STYLE="font-style:normal">117  </FONT>  </FONT><FONT COLOR="#808080"><I>/** El selector de ficheros para seleccionar archivos de imagen */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">118  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JFileChooser m_ImageFileChooser = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JFileChooser(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> File(System.getProperty(</FONT><FONT COLOR="#008000"><B>"user.dir"</B></FONT><FONT COLOR="#000000">))); 
<FONT COLOR=0 STYLE="font-style:normal">119  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para cargar instancias desde un archivo ARFF */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">120  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_LoadARFFButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Load ARFF"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">121  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para salvar las instancias a un archivo ARFF */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">122  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_SaveARFFButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Save ARFF"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">123  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para cargar instancias desde una imagen */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">124  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_LoadImageButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Load Image"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">125  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Botón para salvar el panel de dibujado en un archivo JPEG */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">126  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JButton m_SaveImageButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Save Image"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">127  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Escalar las instancias tras cargarlas para que ocupen toda la extensión del panel a escala natural? */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">128  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JCheckBox m_ScaleAfterLoadCB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Auto scale"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">129  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">130  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Un hilo para salvar/cargar instancias desde ficheros */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">131  </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> Thread m_IOThread; 
<FONT COLOR=0 STYLE="font-style:normal">132  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">133  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Seleccionar qué modo de inserción vamos a utilizar */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">134  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JComboBox m_InsertModeCoB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JComboBox(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> String[]{</FONT><FONT COLOR="#008000"><B>"Allow all points"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">135  </FONT>                                                                 </FONT><FONT COLOR="#008000"><B>"One point per color and coords"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">136  </FONT>                                                                 </FONT><FONT COLOR="#008000"><B>"One point per coords"</B></FONT><FONT COLOR="#000000">}); 
<FONT COLOR=0 STYLE="font-style:normal">137  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Añadir un solo punto con cada click del ratón */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">138  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JCheckBox m_SinglePointAddCB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Add single points"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">139  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Añadir múltiples puntos con cada click del ratón */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">140  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JCheckBox m_MultiplePointAddCB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Add"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">141  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">142  </FONT>  </FONT><FONT COLOR="#808080"><I>//Cuando estamos en modo de inserción múltiple, qué función vamos a utilizar</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">143  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Número de puntos a añadir con cada click del ratón en el modo de adición múltiple */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">144  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> JTextField m_NumPointsToAddPerClickTF = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JTextField(</FONT><FONT COLOR="#008000"><B>"10"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">145  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Para elegir el {</I></FONT><FONT COLOR="#808080"><B>@link</B></FONT><FONT COLOR="#808080"><I> <A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">PointDistribution</A>} que se usará para generar los puntos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">146  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\GenericObjectEditor.java.html">GenericObjectEditor</A> m_DistributionEditor = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\GenericObjectEditor.java.html">GenericObjectEditor</A>(); 
<FONT COLOR=0 STYLE="font-style:normal">147  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Mostrar la selección actual de un {</I></FONT><FONT COLOR="#808080"><B>@link</B></FONT><FONT COLOR="#808080"><I> <A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">PointDistribution</A>} para generar los puntos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">148  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\PropertyPanel.java.html">PropertyPanel</A> m_DistributionSelector = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\customizedWeka\PropertyPanel.java.html">PropertyPanel</A>(m_DistributionEditor); 
<FONT COLOR=0 STYLE="font-style:normal">149  </FONT>  </FONT><FONT COLOR="#808080"><I>/** La función que se utilizará para generar los puntos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">150  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">PointDistribution</A> m_Distribution = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\pointDistributions\UniformDistribution.java.html">oaidtb.misc.pointDistributions.UniformDistribution</A>(); 
<FONT COLOR=0 STYLE="font-style:normal">151  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">152  </FONT>  </FONT><FONT COLOR="#808080"><I>//Entrar y salir del modo zoom y hacer zoom out</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">153  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Entrar o salir del modo zoom */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">154  </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> JCheckBox m_ZoomModeCB = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JCheckBox(</FONT><FONT COLOR="#008000"><B>"Zoom mode"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">155  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Hacer zoom out */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">156  </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> JButton m_ZoomOutButton = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JButton(</FONT><FONT COLOR="#008000"><B>"Zoom out"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">157  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">158  </FONT></FONT><FONT COLOR="#808080"><I>//  TODO: Centralizar las acciones todo con el interfaz Action, colocar todos los componentes como private</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">159  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_ZoomModeAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">160  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_ZoomOutAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">161  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_ChangeColor1Action;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">162  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_ChangeColor2Action;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">163  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_SplitAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">164  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_JoinAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">165  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_ResetAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">166  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_LoadARFFAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">167  </FONT></FONT><FONT COLOR="#808080"><I>//  private MyAbstractAction m_SaveARFFAction;</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">168  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">169  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">170  </FONT>   * Constructor. 
<FONT COLOR=0 STYLE="font-style:normal">171  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">172  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> drawingPanel El panel de dibujado en que se mostrarán las instancias 
<FONT COLOR=0 STYLE="font-style:normal">173  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">174  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> InstancesEditingPanel(<A href="..\..\oaidtb\gui\DrawingPanel.java.html">DrawingPanel</A> drawingPanel){ 
<FONT COLOR=0 STYLE="font-style:normal">175  </FONT>    m_DrawingPanel = drawingPanel; 
<FONT COLOR=0 STYLE="font-style:normal">176  </FONT>    m_Points = m_DrawingPanel.getPoints(); 
<FONT COLOR=0 STYLE="font-style:normal">177  </FONT>    initGUI(); 
<FONT COLOR=0 STYLE="font-style:normal">178  </FONT>    layoutComponents(); 
<FONT COLOR=0 STYLE="font-style:normal">179  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">180  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">181  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">182  </FONT>   * Listener que escucha las pulsaciones de botón del ratón sobre el panel de 
<FONT COLOR=0 STYLE="font-style:normal">183  </FONT>   * dibujo para insertar instancias en el problema 
<FONT COLOR=0 STYLE="font-style:normal">184  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">185  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> MouseListener m_AddInstancesListener = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> MouseAdapter(){ 
<FONT COLOR=0 STYLE="font-style:normal">186  </FONT>    </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> mousePressed(MouseEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">187  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">188  </FONT>      </FONT><FONT COLOR="#808080"><I>//Las coordenadas de la pulsación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">189  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> x = e.getX(), y = e.getY(); 
<FONT COLOR=0 STYLE="font-style:normal">190  </FONT>      </FONT><FONT COLOR="#808080"><I>//Dependiendo del botón pulsado...</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">191  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> JButton button = e.isMetaDown() ? m_Color2Button : m_Color1Button; 
<FONT COLOR=0 STYLE="font-style:normal">192  </FONT>      </FONT><FONT COLOR="#808080"><I>//La instancia será del color del botón 1 o del 2</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">193  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Color color = button.getBackground(); 
<FONT COLOR=0 STYLE="font-style:normal">194  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">195  </FONT>      </FONT><FONT COLOR="#808080"><I>//Modo de inserción múltiple</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">196  </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_MultiplePointAddCB.isSelected()){ 
<FONT COLOR=0 STYLE="font-style:normal">197  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">198  </FONT>        </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> numInserted = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">199  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">200  </FONT>        </FONT><FONT COLOR="#808080"><I>//Los números generados por la función sólo serán añadidos si caen dentro del área de la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">201  </FONT>        </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> maxX = m_DrawingPanel.getWidth() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">202  </FONT>          maxY = m_DrawingPanel.getHeight() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">203  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">204  </FONT>        </FONT><FONT COLOR="#808080"><I>//Añadimos tantos puntos como haya especificado el usuario</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">205  </FONT>        </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; Integer.parseInt(m_NumPointsToAddPerClickTF.getText()); i++){ 
<FONT COLOR=0 STYLE="font-style:normal">206  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">207  </FONT>          </FONT><FONT COLOR="#808080"><I>//Generamos un nuevo punto utilizando la función seleccionada</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">208  </FONT>          m_Distribution.setCenter(x); 
<FONT COLOR=0 STYLE="font-style:normal">209  </FONT>          </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> newX = (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">) Math.round(m_Distribution.nextDouble()); 
<FONT COLOR=0 STYLE="font-style:normal">210  </FONT>          m_Distribution.setCenter(y); 
<FONT COLOR=0 STYLE="font-style:normal">211  </FONT>          </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> newY = (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">) Math.round(m_Distribution.nextDouble()); 
<FONT COLOR=0 STYLE="font-style:normal">212  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">213  </FONT>          </FONT><FONT COLOR="#808080"><I>//Si el punto generado no está en el área vista en la pantalla, no lo añadimos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">214  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (newX &LT; </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> || newX &GT; maxX || newY &LT; </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> || newY &GT; maxY) 
<FONT COLOR=0 STYLE="font-style:normal">215  </FONT>            </FONT><FONT COLOR="#000080"><B>continue</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">216  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">217  </FONT>          </FONT><FONT COLOR="#808080"><I>//Intentamos añadirlo a la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">218  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_Points.addPoint(newX, newY, color)) 
<FONT COLOR=0 STYLE="font-style:normal">219  </FONT>            numInserted++; 
<FONT COLOR=0 STYLE="font-style:normal">220  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">221  </FONT>        </FONT><FONT COLOR="#808080"><I>//Dibujamos las instancias en la imagen de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">222  </FONT>        m_DrawingPanel.drawLastInstances(numInserted, color); 
<FONT COLOR=0 STYLE="font-style:normal">223  </FONT>        </FONT><FONT COLOR="#808080"><I>//Para poder hacer undo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">224  </FONT>        newInsertionOp(numInserted); 
<FONT COLOR=0 STYLE="font-style:normal">225  </FONT>        </FONT><FONT COLOR="#808080"><I>//Repintamos el panel</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">226  </FONT>        m_DrawingPanel.repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">227  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">228  </FONT>      </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{</FONT><FONT COLOR="#808080"><I>//Añadimos un punto en el lugar donde hemos hecho el click</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">229  </FONT>        </FONT><FONT COLOR="#808080"><I>//Intentamos añadirlo a la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">230  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_Points.addPoint(x, y, color)){ 
<FONT COLOR=0 STYLE="font-style:normal">231  </FONT>          </FONT><FONT COLOR="#808080"><I>//Para poder hacer undo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">232  </FONT>          newInsertionOp(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">233  </FONT>          </FONT><FONT COLOR="#808080"><I>//Dibujamos el punto</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">234  </FONT>          m_DrawingPanel.drawInstance(x, y, color); 
<FONT COLOR=0 STYLE="font-style:normal">235  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">236  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">237  </FONT>      updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">238  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">239  </FONT>  }; 
<FONT COLOR=0 STYLE="font-style:normal">240  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">241  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">242  </FONT>   * Listener que escucha las pulsaciones de botón del ratón sobre el panel de 
<FONT COLOR=0 STYLE="font-style:normal">243  </FONT>   * dibujo para insertar instancias en el problema. Esta es la versión para añadir 
<FONT COLOR=0 STYLE="font-style:normal">244  </FONT>   * puntos cuando nos encontramos en modo zoom, de manera que mapeamos 
<FONT COLOR=0 STYLE="font-style:normal">245  </FONT>   * las coordenadas de pantalla a las correspondientes del área que esta representa. 
<FONT COLOR=0 STYLE="font-style:normal">246  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">247  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> MouseListener m_AddInstancesListenerWithZoom = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> MouseAdapter(){ 
<FONT COLOR=0 STYLE="font-style:normal">248  </FONT>    </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> mousePressed(MouseEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">249  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">250  </FONT>      </FONT><FONT COLOR="#808080"><I>//Las coordenadas de la pulsación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">251  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> x = e.getX(), y = e.getY(); 
<FONT COLOR=0 STYLE="font-style:normal">252  </FONT>      </FONT><FONT COLOR="#808080"><I>//Dependiendo del botón pulsado...</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">253  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> JButton button = e.isMetaDown() ? m_Color2Button : m_Color1Button; 
<FONT COLOR=0 STYLE="font-style:normal">254  </FONT>      </FONT><FONT COLOR="#808080"><I>//La instancia será del color del botón 1 o del 2</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">255  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Color color = button.getBackground(); 
<FONT COLOR=0 STYLE="font-style:normal">256  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">257  </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_MultiplePointAddCB.isSelected()){ 
<FONT COLOR=0 STYLE="font-style:normal">258  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">259  </FONT>        </FONT><FONT COLOR="#808080"><I>//Un vector en el que guardar las instancias que añadimos para poder dibujarlas después rápidamente</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">260  </FONT>        FastVector vector = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FastVector(); 
<FONT COLOR=0 STYLE="font-style:normal">261  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">262  </FONT>        </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> numInserted = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">263  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">264  </FONT>        </FONT><FONT COLOR="#808080"><I>//Calculamos los límites de la región representada en el panel</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">265  </FONT>        </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> origX, origY, finalX, finalY; 
<FONT COLOR=0 STYLE="font-style:normal">266  </FONT>        origX = m_DrawingPanel.getRegionX(); 
<FONT COLOR=0 STYLE="font-style:normal">267  </FONT>        origY = m_DrawingPanel.getRegionY(); 
<FONT COLOR=0 STYLE="font-style:normal">268  </FONT>        finalX = origX + m_DrawingPanel.getRegionWidth(); 
<FONT COLOR=0 STYLE="font-style:normal">269  </FONT>        finalY = origY + m_DrawingPanel.getRegionHeight(); 
<FONT COLOR=0 STYLE="font-style:normal">270  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">271  </FONT>        </FONT><FONT COLOR="#808080"><I>//Calculamos las coordenadas en la región representada del punto del panel sobre el que hemos hecho click</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">272  </FONT>        </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> x2 = m_DrawingPanel.getXFromPanel(x); 
<FONT COLOR=0 STYLE="font-style:normal">273  </FONT>        </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> y2 = m_DrawingPanel.getYFromPanel(y); 
<FONT COLOR=0 STYLE="font-style:normal">274  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">275  </FONT>        </FONT><FONT COLOR="#808080"><I>//Añadimos tantos puntos como marque el marco de configuración</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">276  </FONT>        </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; Integer.parseInt(m_NumPointsToAddPerClickTF.getText()); i++){ 
<FONT COLOR=0 STYLE="font-style:normal">277  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">278  </FONT>          </FONT><FONT COLOR="#808080"><I>//Generamos un nuevo punto utilizando la función seleccionada</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">279  </FONT>          m_Distribution.setCenter(x2); 
<FONT COLOR=0 STYLE="font-style:normal">280  </FONT>          </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> newX = m_Distribution.nextDouble(); 
<FONT COLOR=0 STYLE="font-style:normal">281  </FONT>          m_Distribution.setCenter(y2); 
<FONT COLOR=0 STYLE="font-style:normal">282  </FONT>          </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> newY = m_Distribution.nextDouble(); 
<FONT COLOR=0 STYLE="font-style:normal">283  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">284  </FONT>          </FONT><FONT COLOR="#808080"><I>//Si el punto generado no está en la región representada en la pantalla, no lo añadimos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">285  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (newX &LT; origX || newX &GT; finalX || newY &LT; origY || newY &GT; finalY) 
<FONT COLOR=0 STYLE="font-style:normal">286  </FONT>            </FONT><FONT COLOR="#000080"><B>continue</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">287  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">288  </FONT>          </FONT><FONT COLOR="#808080"><I>//Intentamos añadirlo a la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">289  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_Points.addPoint(newX, newY, color)){ 
<FONT COLOR=0 STYLE="font-style:normal">290  </FONT>            numInserted++; 
<FONT COLOR=0 STYLE="font-style:normal">291  </FONT>            </FONT><FONT COLOR="#808080"><I>//Guardamos las coordenadas del punto generado trasladadas y escaladas en la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">292  </FONT>            vector.addElement(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Instance(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">[]{m_DrawingPanel.getXInPanel(newX), 
<FONT COLOR=0 STYLE="font-style:normal">293  </FONT>                                                           m_DrawingPanel.getYInPanel(newY), 
<FONT COLOR=0 STYLE="font-style:normal">294  </FONT>                                                           </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">})); 
<FONT COLOR=0 STYLE="font-style:normal">295  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">296  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">297  </FONT>        </FONT><FONT COLOR="#808080"><I>//Dibujamos los puntos añadidos en la imagen de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">298  </FONT>        m_DrawingPanel.drawInstances(vector, color); 
<FONT COLOR=0 STYLE="font-style:normal">299  </FONT>        </FONT><FONT COLOR="#808080"><I>//Para poder hacer undo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">300  </FONT>        newInsertionOp(numInserted); 
<FONT COLOR=0 STYLE="font-style:normal">301  </FONT>        </FONT><FONT COLOR="#808080"><I>//Repuntamos el panel</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">302  </FONT>        m_DrawingPanel.repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">303  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">304  </FONT>      </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{</FONT><FONT COLOR="#808080"><I>//Añadimos un solo punto</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">305  </FONT>        </FONT><FONT COLOR="#808080"><I>//Intentamos añadir el punto de la región que representa el punto sobre el que hemos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">306  </FONT>        </FONT><FONT COLOR="#808080"><I>//pulsado en la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">307  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_Points.addPoint(m_DrawingPanel.getXFromPanel(x), m_DrawingPanel.getYFromPanel(y), color)){ 
<FONT COLOR=0 STYLE="font-style:normal">308  </FONT>          newInsertionOp(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">309  </FONT>          </FONT><FONT COLOR="#808080"><I>//Dibujamos el punto</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">310  </FONT>          m_DrawingPanel.drawInstance(x, y, color); 
<FONT COLOR=0 STYLE="font-style:normal">311  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">312  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">313  </FONT>      updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">314  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">315  </FONT>  }; 
<FONT COLOR=0 STYLE="font-style:normal">316  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">317  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">318  </FONT>   * Actualizamos el texto de los botones de selección de color 
<FONT COLOR=0 STYLE="font-style:normal">319  </FONT>   * para que muestren el número de instancias del color que representa cada botón 
<FONT COLOR=0 STYLE="font-style:normal">320  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">321  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> updateColorSelectionButtonsText(){ 
<FONT COLOR=0 STYLE="font-style:normal">322  </FONT>    m_Color1Button.setText(String.valueOf(m_Points.getNumPointsOfColor(m_Color1Button.getBackground()))); 
<FONT COLOR=0 STYLE="font-style:normal">323  </FONT>    m_Color2Button.setText(String.valueOf(m_Points.getNumPointsOfColor(m_Color2Button.getBackground()))); 
<FONT COLOR=0 STYLE="font-style:normal">324  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">325  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">326  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">327  </FONT>   * Definimos que la clase está ocupada si está haciendo operaciones de entrada/salida a ficheros 
<FONT COLOR=0 STYLE="font-style:normal">328  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">329  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@return</B></FONT><FONT COLOR="#808080"><I> true Si la clase está ocupada 
<FONT COLOR=0 STYLE="font-style:normal">330  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">331  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>boolean</B></FONT><FONT COLOR="#000000"> isBusy(){ 
<FONT COLOR=0 STYLE="font-style:normal">332  </FONT>    </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000"> m_IOThread == </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">333  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">334  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">335  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">336  </FONT>   * En el modo edición, las instancias que existen en la base de datos 
<FONT COLOR=0 STYLE="font-style:normal">337  </FONT>   * pueden ser cambiadas en cualquier momento; este método habilita las acciones 
<FONT COLOR=0 STYLE="font-style:normal">338  </FONT>   * que pueden provocar cambios en la base de datos y, si es pertinente, añade los 
<FONT COLOR=0 STYLE="font-style:normal">339  </FONT>   * listeners necesarios al panel de dibujado para insertar instancias manualmente 
<FONT COLOR=0 STYLE="font-style:normal">340  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">341  </FONT>   * </I></FONT><FONT COLOR="#808080"><I>&LT;p&GT;&LT;p&GT;</I></FONT><FONT COLOR="#808080"><I> Este método es ejecutado de principio a fin sin poder ser interrumpido por ningún otro thread 
<FONT COLOR=0 STYLE="font-style:normal">342  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">343  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">344  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> enterEditMode(){ 
<FONT COLOR=0 STYLE="font-style:normal">345  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">346  </FONT>    </FONT><FONT COLOR="#808080"><I>//El thread en que estamos ejecutando esta operación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">347  </FONT>    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Thread thread = Thread.currentThread(); 
<FONT COLOR=0 STYLE="font-style:normal">348  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">349  </FONT>    </FONT><FONT COLOR="#808080"><I>//Esta operación debe ser ejecutada inmediatamente y sin interrupción</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">350  </FONT>    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> priority = thread.getPriority(); 
<FONT COLOR=0 STYLE="font-style:normal">351  </FONT>    thread.setPriority(Thread.MAX_PRIORITY); 
<FONT COLOR=0 STYLE="font-style:normal">352  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">353  </FONT>    </FONT><FONT COLOR="#808080"><I>//Añadimos los listeners que permiten meter instancias con clicks de ratón</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">354  </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (!m_ZoomModeCB.isSelected() && !isBusy()){ 
<FONT COLOR=0 STYLE="font-style:normal">355  </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_DrawingPanel.isZoomedIn()){ 
<FONT COLOR=0 STYLE="font-style:normal">356  </FONT>        m_DrawingPanel.removeMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">357  </FONT>        m_DrawingPanel.addMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">358  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">359  </FONT>      </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">360  </FONT>        m_DrawingPanel.removeMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">361  </FONT>        m_DrawingPanel.addMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">362  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">363  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">364  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">365  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar el botón de eliminar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">366  </FONT>    m_ResetButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">367  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">368  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar los botones de partición de instancias en test & train</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">369  </FONT>    m_SplitButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">370  </FONT>    m_JoinButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">371  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">372  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar los botones de modo zoom</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">373  </FONT>    m_ZoomModeCB.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">374  </FONT>    m_ZoomOutButton.setEnabled(m_DrawingPanel.isZoomedIn()); 
<FONT COLOR=0 STYLE="font-style:normal">375  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">376  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar las características de undo/redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">377  </FONT>    m_UndoButton.setEnabled(m_NumberOfInserted.size() != </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">378  </FONT>    m_RedoButton.setEnabled(m_RedoBuffer.size() !=</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">379  </FONT>    m_FlushButton.setEnabled(m_RedoBuffer.size() != </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">380  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">381  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitamos los botones de cargar/salvar a fichero</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">382  </FONT>    m_LoadARFFButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">383  </FONT>    m_SaveARFFButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">384  </FONT>    m_LoadImageButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">385  </FONT>    m_SaveImageButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">386  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">387  </FONT>    </FONT><FONT COLOR="#808080"><I>//Volvemos a la prioridad anterior</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">388  </FONT>    thread.setPriority(priority); 
<FONT COLOR=0 STYLE="font-style:normal">389  </FONT>    Thread.yield(); 
<FONT COLOR=0 STYLE="font-style:normal">390  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">391  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">392  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">393  </FONT>   * En el modo edición, las instancias que existen en la base de datos 
<FONT COLOR=0 STYLE="font-style:normal">394  </FONT>   * pueden ser cambiadas en cualquier momento; este método deshabilita las acciones 
<FONT COLOR=0 STYLE="font-style:normal">395  </FONT>   * que pueden provocar cambios en la base de datos y, si es pertinente, quita los 
<FONT COLOR=0 STYLE="font-style:normal">396  </FONT>   * listeners necesarios al panel de dibujado para evitar insertar instancias manualmente 
<FONT COLOR=0 STYLE="font-style:normal">397  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">398  </FONT>   * </I></FONT><FONT COLOR="#808080"><I>&LT;p&GT;&LT;p&GT;</I></FONT><FONT COLOR="#808080"><I> Este método es ejecutado de principio a fin sin poder ser interrumpido por ningún otro thread 
<FONT COLOR=0 STYLE="font-style:normal">399  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">400  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> exitEditMode(){ 
<FONT COLOR=0 STYLE="font-style:normal">401  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">402  </FONT>    </FONT><FONT COLOR="#808080"><I>//El thread en que estamos ejecutando esta operación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">403  </FONT>    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Thread thread = Thread.currentThread(); 
<FONT COLOR=0 STYLE="font-style:normal">404  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">405  </FONT>    </FONT><FONT COLOR="#808080"><I>//Esta es una operación que debe ser ejecutada inmediatamente y sin interrupción</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">406  </FONT>    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> priority = thread.getPriority(); 
<FONT COLOR=0 STYLE="font-style:normal">407  </FONT>    thread.setPriority(Thread.MAX_PRIORITY); 
<FONT COLOR=0 STYLE="font-style:normal">408  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">409  </FONT>    </FONT><FONT COLOR="#808080"><I>//Quitamos los listeners que permiten meter instancias con clicks de ratón</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">410  </FONT>    m_DrawingPanel.removeMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">411  </FONT>    m_DrawingPanel.removeMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">412  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">413  </FONT>    </FONT><FONT COLOR="#808080"><I>//Deshabilitar el botón de eliminar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">414  </FONT>    m_ResetButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">415  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">416  </FONT>    </FONT><FONT COLOR="#808080"><I>//Deshabilitar los botones de partición de instancias en test & train</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">417  </FONT>    m_SplitButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">418  </FONT>    m_JoinButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">419  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">420  </FONT>    </FONT><FONT COLOR="#808080"><I>//Deshabilitar los botones de modo zoom</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">421  </FONT>    m_ZoomModeCB.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">422  </FONT>    m_ZoomOutButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">423  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">424  </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar las características de undo/redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">425  </FONT>    m_UndoButton.setEnabled(m_NumberOfInserted.size() != </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">426  </FONT>    m_RedoButton.setEnabled(m_RedoBuffer.size() !=</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">427  </FONT>    m_FlushButton.setEnabled(m_RedoBuffer.size() != </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">428  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">429  </FONT>    </FONT><FONT COLOR="#808080"><I>//Deshabilitamos los botones de cargar/salvar a fichero</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">430  </FONT>    m_LoadARFFButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">431  </FONT>    m_SaveARFFButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">432  </FONT>    m_LoadImageButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">433  </FONT>    m_SaveImageButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">434  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">435  </FONT>    </FONT><FONT COLOR="#808080"><I>//Volvemos a la prioridad anterior</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">436  </FONT>    thread.setPriority(priority); 
<FONT COLOR=0 STYLE="font-style:normal">437  </FONT>    Thread.yield(); 
<FONT COLOR=0 STYLE="font-style:normal">438  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">439  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">440  </FONT>  </FONT><FONT COLOR="#808080"><I>/** Inicialización de los componentes y de las acciones */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">441  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> initGUI(){ 
<FONT COLOR=0 STYLE="font-style:normal">442  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">443  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de undo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">444  </FONT>    m_UndoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">445  </FONT>    m_UndoButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">446  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">447  </FONT>        </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">448  </FONT>          undoInsertion(); 
<FONT COLOR=0 STYLE="font-style:normal">449  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">450  </FONT>        </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">451  </FONT>          System.err.println(ex.toString()); 
<FONT COLOR=0 STYLE="font-style:normal">452  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">453  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">454  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">455  </FONT>    m_UndoButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Deshacer la inserción de instancias provocada por el último click del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">456  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">457  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">458  </FONT>    m_RedoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">459  </FONT>    m_RedoButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">460  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">461  </FONT>        </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">462  </FONT>          redoInsertion(); 
<FONT COLOR=0 STYLE="font-style:normal">463  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">464  </FONT>        </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">465  </FONT>          System.err.println(ex.toString()); 
<FONT COLOR=0 STYLE="font-style:normal">466  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">467  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">468  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">469  </FONT>    m_RedoButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Rehacer la última inserción de instancias deshecha"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">470  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">471  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón para liberer la memoria reservada por las operaciones de undo & redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">472  </FONT>    m_FlushButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">473  </FONT>    m_FlushButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">474  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">475  </FONT>        flushRedoAndUndoBuffers(); 
<FONT COLOR=0 STYLE="font-style:normal">476  </FONT>        m_FlushButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">477  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">478  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">479  </FONT>    m_FlushButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Liberar la memoria reservada por las operaciones de undo & redo, deshabilitándolas"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">480  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">481  </FONT>    </FONT><FONT COLOR="#808080"><I>//Checkbox para elegir entre repintar todas las instancias o borrar sólo las que se han eliminado con un undo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">482  </FONT>    m_FastEraseMode.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Repintar todas las instancias o sólo borrar las quitadas con cada operación de undo"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">483  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">484  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">485  </FONT>    </FONT><FONT COLOR="#808080"><I>/// Elección del color que representa un botón del ratón</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">486  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">487  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">488  </FONT>    </FONT><FONT COLOR="#808080"><I>//Añadimos el panel que muestra los colores existentes en la base de datos de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">489  </FONT>    </FONT><FONT COLOR="#808080"><I>//dentro del selector de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">490  </FONT>    m_ColorChooser.addChooserPanel(m_ColorHistory = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\ColorHistoryPanel.java.html">ColorHistoryPanel</A>(m_Points)); 
<FONT COLOR=0 STYLE="font-style:normal">491  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">492  </FONT>    </FONT><FONT COLOR="#808080"><I>//Elección del color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">493  </FONT>    ActionListener m = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">494  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">495  </FONT>        </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> JButton button = (JButton) e.getSource(); 
<FONT COLOR=0 STYLE="font-style:normal">496  </FONT>        </FONT><FONT COLOR="#808080"><I>//Listener que comprueba si se ha aceptado una nueva selección</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">497  </FONT>        ActionListener OKListener = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">498  </FONT>          </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e2){ 
<FONT COLOR=0 STYLE="font-style:normal">499  </FONT>            Color c = m_ColorChooser.getColor(); 
<FONT COLOR=0 STYLE="font-style:normal">500  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (c != </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">){  </FONT><FONT COLOR="#808080"><I>//Nunca puede pasar, pero por si las moscas...</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">501  </FONT>              button.setBackground(c); 
<FONT COLOR=0 STYLE="font-style:normal">502  </FONT>              button.setText(String.valueOf(m_Points.getNumPointsOfColor(c))); 
<FONT COLOR=0 STYLE="font-style:normal">503  </FONT>            } 
<FONT COLOR=0 STYLE="font-style:normal">504  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">505  </FONT>        }; 
<FONT COLOR=0 STYLE="font-style:normal">506  </FONT>        </FONT><FONT COLOR="#808080"><I>//Recreamos el panel de historial de colores</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">507  </FONT>        m_ColorHistory.remake(); 
<FONT COLOR=0 STYLE="font-style:normal">508  </FONT>        </FONT><FONT COLOR="#808080"><I>//Mostramos el diálogo de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">509  </FONT>        m_ColorChooser.createDialog(button, </FONT><FONT COLOR="#008000"><B>"Elige un color:"</B></FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">, m_ColorChooser, OKListener, </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">).show(); 
<FONT COLOR=0 STYLE="font-style:normal">510  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">511  </FONT>    }; 
<FONT COLOR=0 STYLE="font-style:normal">512  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">513  </FONT>    </FONT><FONT COLOR="#808080"><I>//Inicializamos los botones de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">514  </FONT>    m_Color1Button.addActionListener(m); 
<FONT COLOR=0 STYLE="font-style:normal">515  </FONT>    m_Color2Button.addActionListener(m); 
<FONT COLOR=0 STYLE="font-style:normal">516  </FONT>    m_Color1Button.setBackground(Color.blue); 
<FONT COLOR=0 STYLE="font-style:normal">517  </FONT>    m_Color2Button.setBackground(Color.red); 
<FONT COLOR=0 STYLE="font-style:normal">518  </FONT>    updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">519  </FONT>    m_Color1Button.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Elegir el color asignado a los clicks del botón izquierdo del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">520  </FONT>    m_Color2Button.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Elegir el color asignado a los clicks del botón derecho del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">521  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">522  </FONT>    </FONT><FONT COLOR="#808080"><I>//Edición de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">523  </FONT>    m_DrawingPanel.addMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">524  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">525  </FONT>    </FONT><FONT COLOR="#808080"><I>//Selección de la función a utilizar cuando estemos en modo de inserción de instancias múltiple</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">526  </FONT>    m_DistributionEditor.setClassType(<A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">oaidtb.misc.pointDistributions.PointDistribution</A>.</FONT><FONT COLOR="#000080"><B>class</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">527  </FONT>    m_DistributionEditor.setValue(m_Distribution); 
<FONT COLOR=0 STYLE="font-style:normal">528  </FONT>    ((<A href="..\..\oaidtb\gui\customizedWeka\GenericObjectEditor.java.html">GenericObjectEditor.GOEPanel</A>) m_DistributionEditor.getCustomEditor()).addOkListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">529  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">530  </FONT>        m_Distribution = (<A href="..\..\oaidtb\misc\pointDistributions\PointDistribution.java.html">PointDistribution</A>) m_DistributionEditor.getValue(); 
<FONT COLOR=0 STYLE="font-style:normal">531  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">532  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">533  </FONT>    m_DistributionEditor.addPropertyChangeListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> PropertyChangeListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">534  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> propertyChange(PropertyChangeEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">535  </FONT>        repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">536  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">537  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">538  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">539  </FONT>    </FONT><FONT COLOR="#808080"><I>//Campo para editar el número de instancias a añadir con cada click del ratón</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">540  </FONT>    <A href="..\..\oaidtb\misc\guiUtils\IntegerDocument.java.html">IntegerDocument</A> document = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\guiUtils\IntegerDocument.java.html">IntegerDocument</A>(); 
<FONT COLOR=0 STYLE="font-style:normal">541  </FONT>    document.setMaxValue(</FONT><FONT COLOR="#0000ff">999</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">542  </FONT>    document.setMinValue(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">543  </FONT>    m_NumPointsToAddPerClickTF.setDocument(document); 
<FONT COLOR=0 STYLE="font-style:normal">544  </FONT>    m_NumPointsToAddPerClickTF.setText(</FONT><FONT COLOR="#008000"><B>"10"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">545  </FONT>    m_NumPointsToAddPerClickTF.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Número de puntos a añadir con cada click del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">546  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">547  </FONT>    </FONT><FONT COLOR="#808080"><I>//Tooltips de las checkboxes de selección del modo de inserción de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">548  </FONT>    m_SinglePointAddCB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Añadir un unico punto con cada click del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">549  </FONT>    m_MultiplePointAddCB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Añadir varios puntos con cada click del ratón"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">550  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">551  </FONT>    </FONT><FONT COLOR="#808080"><I>//ComboBox para configurar las restricciones de inserción:</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">552  </FONT>    </FONT><FONT COLOR="#808080"><I>//Un punto por coordenadas, un punto por coordenadas y color o todos los puntos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">553  </FONT>    m_InsertModeCoB.addItemListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ItemListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">554  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> itemStateChanged(ItemEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">555  </FONT>        m_Points.setInsertMode(m_InsertModeCoB.getSelectedIndex()); 
<FONT COLOR=0 STYLE="font-style:normal">556  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">557  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">558  </FONT>    m_InsertModeCoB.setSelectedIndex(</FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">559  </FONT>    m_InsertModeCoB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Permitir añadir todas las instancias, sólo una por punto y color o sólo una por punto"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">560  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">561  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">562  </FONT>    </FONT><FONT COLOR="#808080"><I>///////////////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">563  </FONT>    </FONT><FONT COLOR="#808080"><I>/// Partición de las instancias en conjuntos de entrenamiento y prueba</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">564  </FONT>    </FONT><FONT COLOR="#808080"><I>///////////////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">565  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">566  </FONT>    </FONT><FONT COLOR="#808080"><I>//Configuración de la barra de configuración del porcentaje de instancias de entrenamiento</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">567  </FONT>    m_TrainPercentageLS.getSlider().setMaximum(</FONT><FONT COLOR="#0000ff">100</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">568  </FONT>    m_TrainPercentageLS.getSlider().setMinimum(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">569  </FONT>    m_TrainPercentageLS.getSlider().setToolTipText(</FONT><FONT COLOR="#008000"><B>"Porcentaje de instancias que irán al conjunto de entrenamiento"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">570  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">571  </FONT>    </FONT><FONT COLOR="#808080"><I>//A la hora de partir las instancias en conjuntos de entrenamiento y prueba, usar sólo aquellas que sean visibles en la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">572  </FONT>    m_UseOnlyInstancesInRegionCB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Al partir las instancias de entrenamiento y test, usar sólo aquellas visibles en la pantalla"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">573  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">574  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de partir las instancias en conjuntos de entrenamiento y prueba</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">575  </FONT>    m_SplitButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">576  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">577  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_UseOnlyInstancesInRegionCB.isSelected() && m_DrawingPanel.isZoomedIn()) 
<FONT COLOR=0 STYLE="font-style:normal">578  </FONT>          m_Points.createTrainAndTestInstancesInRegion(m_DrawingPanel.getRegionX(), m_DrawingPanel.getRegionY(), 
<FONT COLOR=0 STYLE="font-style:normal">579  </FONT>                                                       m_DrawingPanel.getRegionWidth(), m_DrawingPanel.getRegionHeight(), 
<FONT COLOR=0 STYLE="font-style:normal">580  </FONT>                                                       m_TrainPercentageLS.getSlider().getValue() / </FONT><FONT COLOR="#0000ff">100.0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">581  </FONT>        </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">582  </FONT>          m_Points.createTrainAndTestInstances(m_TrainPercentageLS.getSlider().getValue() / </FONT><FONT COLOR="#0000ff">100.0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">583  </FONT>        </FONT><FONT COLOR="#808080"><I>//Repintamos las instancias en el panel para poder representar la nueva partición de instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">584  </FONT>        m_DrawingPanel.setUpdateInstances(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">585  </FONT>        m_DrawingPanel.repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">586  </FONT>        </FONT><FONT COLOR="#808080"><I>//Jefes, hemos partido las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">587  </FONT>        notifyMediators(INSTANCES_SPLIT, m_Points); 
<FONT COLOR=0 STYLE="font-style:normal">588  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">589  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">590  </FONT>    m_SplitButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Partir aleatoriamente las instancias en conjuntos de entrenamiento y de test"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">591  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">592  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón para unir las instancias de prueba a las de entrenamiento</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">593  </FONT>    m_JoinButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">594  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">595  </FONT>        m_Points.destroyTrainAndTestInstances(); 
<FONT COLOR=0 STYLE="font-style:normal">596  </FONT>        </FONT><FONT COLOR="#808080"><I>//Repintamos las instancias del panel para representar todas como instancias de entrenamiento</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">597  </FONT>        m_DrawingPanel.setUpdateInstances(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">598  </FONT>        m_DrawingPanel.repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">599  </FONT>        </FONT><FONT COLOR="#808080"><I>//Jefes, hemos unido las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">600  </FONT>        notifyMediators(INSTANCES_JOIN, m_Points); 
<FONT COLOR=0 STYLE="font-style:normal">601  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">602  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">603  </FONT>    m_JoinButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Unir las instancias de entrenemiento y de test"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">604  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">605  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de eliminar todas las instancias de la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">606  </FONT>    m_ResetButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">607  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">608  </FONT>        </FONT><FONT COLOR="#808080"><I>//Purgamos las instancias de la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">609  </FONT>        m_Points.removeAll(); 
<FONT COLOR=0 STYLE="font-style:normal">610  </FONT>        </FONT><FONT COLOR="#808080"><I>//Colocamos (a 0) el contador de instancias de cada color...</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">611  </FONT>        updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">612  </FONT>        </FONT><FONT COLOR="#808080"><I>//Jefes, hemos borrado todas las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">613  </FONT>        notifyMediators(INSTANCES_DELETED, m_Points); 
<FONT COLOR=0 STYLE="font-style:normal">614  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">615  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">616  </FONT>    m_ResetButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Borrar todas las instancias"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">617  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">618  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">619  </FONT>    </FONT><FONT COLOR="#808080"><I>/// Botones de cargar / salvar</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">620  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">621  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">622  </FONT>    </FONT><FONT COLOR="#808080"><I>//El diálogo de selección de ficheros ARFF</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">623  </FONT>    m_FileChooser.setFileFilter(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ExtensionFileFilter(Instances.FILE_EXTENSION, </FONT><FONT COLOR="#008000"><B>"Arff data "</B></FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">624  </FONT>    m_FileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY); 
<FONT COLOR=0 STYLE="font-style:normal">625  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">626  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de salvar las instancias a un fichero ARFF</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">627  </FONT>    m_SaveARFFButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">628  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">629  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_FileChooser.showSaveDialog(m_SaveARFFButton) == JFileChooser.APPROVE_OPTION){ 
<FONT COLOR=0 STYLE="font-style:normal">630  </FONT>          m_Points.selectAllInstances(); 
<FONT COLOR=0 STYLE="font-style:normal">631  </FONT>          saveInstancesToFile(m_FileChooser.getSelectedFile(), m_Points); 
<FONT COLOR=0 STYLE="font-style:normal">632  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">633  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">634  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">635  </FONT>    m_SaveARFFButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Salvar todas las instancias a un archivo ARFF"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">636  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">637  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de cargar las instancias desde un fichero ARFF</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">638  </FONT>    m_LoadARFFButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">639  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">640  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_FileChooser.showOpenDialog(m_SaveARFFButton) == JFileChooser.APPROVE_OPTION){ 
<FONT COLOR=0 STYLE="font-style:normal">641  </FONT>          loadInstancesFromFile(m_FileChooser.getSelectedFile()); 
<FONT COLOR=0 STYLE="font-style:normal">642  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">643  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">644  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">645  </FONT>    m_LoadARFFButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Cargar instancias desde un archivo ARFF"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">646  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">647  </FONT>    </FONT><FONT COLOR="#808080"><I>//El diálogo de selección de ficheros de imágenes</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">648  </FONT>    m_ImageFileChooser.addChoosableFileFilter(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImageFilter.java.html">ImageFilter</A>()); 
<FONT COLOR=0 STYLE="font-style:normal">649  </FONT>    m_ImageFileChooser.setFileView(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImageFileView.java.html">ImageFileView</A>()); 
<FONT COLOR=0 STYLE="font-style:normal">650  </FONT>    m_ImageFileChooser.setAccessory(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\javaTutorial\ImagePreview.java.html">ImagePreview</A>(m_ImageFileChooser)); 
<FONT COLOR=0 STYLE="font-style:normal">651  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">652  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón para cargar las instancias desde una imagen</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">653  </FONT>    m_LoadImageButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">654  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">655  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_ImageFileChooser.showOpenDialog(m_LoadImageButton) == JFileChooser.APPROVE_OPTION){ 
<FONT COLOR=0 STYLE="font-style:normal">656  </FONT>          loadInstancesFromImage(m_ImageFileChooser.getSelectedFile().getPath()); 
<FONT COLOR=0 STYLE="font-style:normal">657  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">658  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">659  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">660  </FONT>    m_LoadImageButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Cargar instancias desde una imagen (beta)"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">661  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">662  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón para guardar el aspecto del panel de dibujado a una imagen JPEG</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">663  </FONT>    </FONT><FONT COLOR="#808080"><I>//TODO: Moverlo al panel de opciones visuales</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">664  </FONT>    m_SaveImageButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">665  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">666  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_ImageFileChooser.showSaveDialog(m_SaveImageButton) == JFileChooser.APPROVE_OPTION){ 
<FONT COLOR=0 STYLE="font-style:normal">667  </FONT>          captureDrawingPanelToJPEGFile(m_ImageFileChooser.getSelectedFile().getPath()); 
<FONT COLOR=0 STYLE="font-style:normal">668  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">669  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">670  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">671  </FONT>    m_SaveImageButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Capturar a una imagen JPEG el panel de dibujado"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">672  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">673  </FONT>    </FONT><FONT COLOR="#808080"><I>//Tooltip de la checkbox de autoescalado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">674  </FONT>    m_ScaleAfterLoadCB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Tras cargar, trasladar y escalar las instancias para que se ajusten a las dimensiones"</B></FONT><FONT COLOR="#000000">+ 
<FONT COLOR=0 STYLE="font-style:normal">675  </FONT>                                      </FONT><FONT COLOR="#008000"><B>" actuales del panel de dibujado"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">676  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">677  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">678  </FONT>    </FONT><FONT COLOR="#808080"><I>/// Manejo del modo zoom</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">679  </FONT>    </FONT><FONT COLOR="#808080"><I>////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">680  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">681  </FONT>    </FONT><FONT COLOR="#808080"><I>//Checkbox de entrar/salir del modo zoom</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">682  </FONT>    m_ZoomModeCB.addItemListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ItemListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">683  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> itemStateChanged(ItemEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">684  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_ZoomModeCB.isSelected()){ 
<FONT COLOR=0 STYLE="font-style:normal">685  </FONT>          m_DrawingPanel.removeMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">686  </FONT>          m_DrawingPanel.removeMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">687  </FONT>          m_DrawingPanel.enterSelectionMode(); 
<FONT COLOR=0 STYLE="font-style:normal">688  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">689  </FONT>        </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">690  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_DrawingPanel.isZoomedIn()){ 
<FONT COLOR=0 STYLE="font-style:normal">691  </FONT>            m_DrawingPanel.removeMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">692  </FONT>            m_DrawingPanel.addMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">693  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">694  </FONT>          </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">695  </FONT>            m_DrawingPanel.removeMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">696  </FONT>            m_DrawingPanel.addMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">697  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">698  </FONT>          m_DrawingPanel.exitSelectionMode(); 
<FONT COLOR=0 STYLE="font-style:normal">699  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">700  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">701  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">702  </FONT>    m_ZoomModeCB.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Entrar en modo zoom"</B></FONT><FONT COLOR="#000000"> + </FONT><FONT COLOR="#008000"><B>" (Alt-Z)"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">703  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">704  </FONT>    </FONT><FONT COLOR="#808080"><I>//Botón de zoom out</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">705  </FONT>    m_ZoomOutButton.addActionListener(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ActionListener(){ 
<FONT COLOR=0 STYLE="font-style:normal">706  </FONT>      </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> actionPerformed(ActionEvent e){ 
<FONT COLOR=0 STYLE="font-style:normal">707  </FONT>        </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_DrawingPanel.isZoomedIn()){ 
<FONT COLOR=0 STYLE="font-style:normal">708  </FONT>          m_DrawingPanel.zoomOut(); 
<FONT COLOR=0 STYLE="font-style:normal">709  </FONT>          m_DrawingPanel.removeMouseListener(m_AddInstancesListenerWithZoom); 
<FONT COLOR=0 STYLE="font-style:normal">710  </FONT>          </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (!m_ZoomModeCB.isSelected()) 
<FONT COLOR=0 STYLE="font-style:normal">711  </FONT>            m_DrawingPanel.addMouseListener(m_AddInstancesListener); 
<FONT COLOR=0 STYLE="font-style:normal">712  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">713  </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">714  </FONT>    }); 
<FONT COLOR=0 STYLE="font-style:normal">715  </FONT>    m_ZoomOutButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">716  </FONT>    m_ZoomOutButton.setToolTipText(</FONT><FONT COLOR="#008000"><B>"Volver a ver todo el dominio del problema"</B></FONT><FONT COLOR="#000000"> + </FONT><FONT COLOR="#008000"><B>" (Alt-X)"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">717  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">718  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">719  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">720  </FONT>   * Este método captura la imagen del panel de dibujado que aparece en pantalla 
<FONT COLOR=0 STYLE="font-style:normal">721  </FONT>   * y la pasa a un archivo JPEG (con máxima calidad de compresión); 
<FONT COLOR=0 STYLE="font-style:normal">722  </FONT>   * al contrario que el resto de las funciones de I/O, 
<FONT COLOR=0 STYLE="font-style:normal">723  </FONT>   * esta operación no la hacemos en un thread diferente, pues acaba rápidamente 
<FONT COLOR=0 STYLE="font-style:normal">724  </FONT>   * en todos los casos: la compresión no es un proceso muy pesado y como máximo 
<FONT COLOR=0 STYLE="font-style:normal">725  </FONT>   * la imagen a comprimir tendrá un tamaño casi igual al de la pantalla del 
<FONT COLOR=0 STYLE="font-style:normal">726  </FONT>   * usuario, por lo que tenemos la certeza de que el archivo a guardar nunca 
<FONT COLOR=0 STYLE="font-style:normal">727  </FONT>   * será de gran tamaño. 
<FONT COLOR=0 STYLE="font-style:normal">728  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">729  </FONT>   * </I></FONT><FONT COLOR="#808080"><I>&LT;p&GT;</I></FONT><FONT COLOR="#808080"><I>Si la extensión del fichero pasado no es "jpg" o "jpeg", se añade la extensión 
<FONT COLOR=0 STYLE="font-style:normal">730  </FONT>   * "jpg" al nombre del fichero 
<FONT COLOR=0 STYLE="font-style:normal">731  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">732  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> path El camino de acceso al archivo de acceso al fichero 
<FONT COLOR=0 STYLE="font-style:normal">733  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">734  </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> captureDrawingPanelToJPEGFile(String path){ 
<FONT COLOR=0 STYLE="font-style:normal">735  </FONT>    </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">736  </FONT>      </FONT><FONT COLOR="#808080"><I>//Capturamos la imagen del componente</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">737  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Image image = <A href="..\..\oaidtb\misc\Utils.java.html">oaidtb.misc.Utils</A>.captureComponentToImage(m_DrawingPanel); 
<FONT COLOR=0 STYLE="font-style:normal">738  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">739  </FONT>      </FONT><FONT COLOR="#808080"><I>//La pintamos en un BufferedImage de tipo INT_RGB</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">740  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> BufferedImage bi = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> BufferedImage(image.getWidth(</FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">), image.getHeight(</FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">), BufferedImage.TYPE_INT_RGB); 
<FONT COLOR=0 STYLE="font-style:normal">741  </FONT>      Graphics2D g = bi.createGraphics(); 
<FONT COLOR=0 STYLE="font-style:normal">742  </FONT>      g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY); 
<FONT COLOR=0 STYLE="font-style:normal">743  </FONT>      g.drawImage(image, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, bi.getWidth(), bi.getHeight(), </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">744  </FONT>      g.dispose(); 
<FONT COLOR=0 STYLE="font-style:normal">745  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">746  </FONT>      </FONT><FONT COLOR="#808080"><I>//Abrimos el stream de salida al fichero especificado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">747  </FONT>      </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> BufferedOutputStream out; 
<FONT COLOR=0 STYLE="font-style:normal">748  </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (path.endsWith(</FONT><FONT COLOR="#008000"><B>".jpg"</B></FONT><FONT COLOR="#000000">) || path.endsWith(</FONT><FONT COLOR="#008000"><B>".jpeg"</B></FONT><FONT COLOR="#000000">)) 
<FONT COLOR=0 STYLE="font-style:normal">749  </FONT>        out = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> BufferedOutputStream(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FileOutputStream(path)); 
<FONT COLOR=0 STYLE="font-style:normal">750  </FONT>      </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">751  </FONT>        out = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> BufferedOutputStream(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FileOutputStream(path + </FONT><FONT COLOR="#008000"><B>".jpg"</B></FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">752  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">753  </FONT>      </FONT><FONT COLOR="#808080"><I>//Utilizamos el codec jpeg distribuido con el JDK</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">754  </FONT>      JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out); 
<FONT COLOR=0 STYLE="font-style:normal">755  </FONT>      </FONT><FONT COLOR="#808080"><I>//Clase para configurar las opciones de configuración</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">756  </FONT>      JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bi); 
<FONT COLOR=0 STYLE="font-style:normal">757  </FONT>      </FONT><FONT COLOR="#808080"><I>//Máxima calidad</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">758  </FONT>      param.setQuality(</FONT><FONT COLOR="#0000ff">1F</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">759  </FONT>      encoder.setJPEGEncodeParam(param); 
<FONT COLOR=0 STYLE="font-style:normal">760  </FONT>      </FONT><FONT COLOR="#808080"><I>//Comprimimos la imagen</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">761  </FONT>      encoder.encode(bi); 
<FONT COLOR=0 STYLE="font-style:normal">762  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">763  </FONT>      </FONT><FONT COLOR="#808080"><I>//Cerramos el stream</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">764  </FONT>      out.close(); 
<FONT COLOR=0 STYLE="font-style:normal">765  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">766  </FONT>    </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">767  </FONT>      ex.printStackTrace(); 
<FONT COLOR=0 STYLE="font-style:normal">768  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">769  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">770  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">771  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">772  </FONT>   * Cargar las instancias desde un archivo de imagen. 
<FONT COLOR=0 STYLE="font-style:normal">773  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">774  </FONT>   * </I></FONT><FONT COLOR="#808080"><I>&LT;p&GT;&LT;p&GT;</I></FONT><FONT COLOR="#808080"><I> 
<FONT COLOR=0 STYLE="font-style:normal">775  </FONT>   * Dado que la base de datos 
<FONT COLOR=0 STYLE="font-style:normal">776  </FONT>   * de instancias está pensada para poder añadir instancias interactivamente, la carga 
<FONT COLOR=0 STYLE="font-style:normal">777  </FONT>   * de instancias "masiva" desde un fichero de imagen, ie. la transformación de sus 
<FONT COLOR=0 STYLE="font-style:normal">778  </FONT>   * pixeles en instancias que entiendan las clases de weka, a una estructura de 
<FONT COLOR=0 STYLE="font-style:normal">779  </FONT>   * datos de este tipo es extremadamente lenta debido, principalmente, al crecimiento 
<FONT COLOR=0 STYLE="font-style:normal">780  </FONT>   * de los índices de colores sobre instancias; por ejemplo, la carga de una imagen con 
<FONT COLOR=0 STYLE="font-style:normal">781  </FONT>   * 54000 puntos y 19504 colores distintos puntos es una tarea que llega a tardar 27 minutos 
<FONT COLOR=0 STYLE="font-style:normal">782  </FONT>   * en un AMD Athlon XP 1466@1700. Existe, en primera fase de desarrollo aún, una clase que 
<FONT COLOR=0 STYLE="font-style:normal">783  </FONT>   * he llamado FastBatchPoint2DInstances que es una versión de la clase Point2DInstances 
<FONT COLOR=0 STYLE="font-style:normal">784  </FONT>   * pensada especialmente para esta tarea; el tiempo de carga de la misma imagen con esta clase 
<FONT COLOR=0 STYLE="font-style:normal">785  </FONT>   * se reduce, en las mismas condiciones, a algo menos de 20 segundos, con un consumo de 
<FONT COLOR=0 STYLE="font-style:normal">786  </FONT>   * memoria y unas funcionalidades similares. 
<FONT COLOR=0 STYLE="font-style:normal">787  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">788  </FONT>   * </I></FONT><FONT COLOR="#808080"><I>&LT;p&GT;</I></FONT><FONT COLOR="#808080"><I>De todas formas, debido también a la propia ineficiencia de Java en el manejo de la memoria y 
<FONT COLOR=0 STYLE="font-style:normal">789  </FONT>   * al hecho de que las clases/estructuras de weka sean genéricas, 
<FONT COLOR=0 STYLE="font-style:normal">790  </FONT>   * los métodos y las estructuras de la librería no están preparados para manejar 
<FONT COLOR=0 STYLE="font-style:normal">791  </FONT>   * conjuntos de datos tan vastos y esto ha hecho que me haya resultado imposible realizar operación 
<FONT COLOR=0 STYLE="font-style:normal">792  </FONT>   * alguna con estas 54000 instancias (siempre con la excepción &LT;&LT;Out of memory&GT;&GT;...), 
<FONT COLOR=0 STYLE="font-style:normal">793  </FONT>   * ni aún operando desde la línea de comandos; por lo tanto, 
<FONT COLOR=0 STYLE="font-style:normal">794  </FONT>   * he descartado momentáneamente la creación de una aplicación independiente para poder 
<FONT COLOR=0 STYLE="font-style:normal">795  </FONT>   * crear hipótesis a partir de imágenes "tan grandes", debido al gran (y oscuro) trabajo 
<FONT COLOR=0 STYLE="font-style:normal">796  </FONT>   * que ello supondría. 
<FONT COLOR=0 STYLE="font-style:normal">797  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">798  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> imageName El path del fichero de imagen 
<FONT COLOR=0 STYLE="font-style:normal">799  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">800  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> loadInstancesFromImage(</FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> String imageName){ 
<FONT COLOR=0 STYLE="font-style:normal">801  </FONT>    </FONT><FONT COLOR="#808080"><I>//Comprobar que no estemos realizando ya otra operación de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">802  </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_IOThread == </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">){ 
<FONT COLOR=0 STYLE="font-style:normal">803  </FONT>      m_IOThread = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Thread(){ 
<FONT COLOR=0 STYLE="font-style:normal">804  </FONT>        </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> run(){ 
<FONT COLOR=0 STYLE="font-style:normal">805  </FONT>          </FONT><FONT COLOR="#808080"><I>//Bandera que indica si el proceso ha acabado regularmente o ha fallado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">806  </FONT>          </FONT><FONT COLOR="#000080"><B>boolean</B></FONT><FONT COLOR="#000000"> isFailed = </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">807  </FONT>          </FONT><FONT COLOR="#808080"><I>//Evitamos cambiar las instancias mientras estamos salvando</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">808  </FONT>          exitEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">809  </FONT>          </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">810  </FONT>            </FONT><FONT COLOR="#808080"><I>//Comunicar a los mediadores que hemos comenzado a cargar instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">811  </FONT>            notifyMediators(INSTANCES_LOAD_START, imageName); 
<FONT COLOR=0 STYLE="font-style:normal">812  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">813  </FONT>            </FONT><FONT COLOR="#808080"><I>//Cargamos la imagen</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">814  </FONT>            Image img = Toolkit.getDefaultToolkit().getImage(imageName); 
<FONT COLOR=0 STYLE="font-style:normal">815  </FONT>            MediaTracker mediaTracker = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> MediaTracker(m_LoadImageButton); 
<FONT COLOR=0 STYLE="font-style:normal">816  </FONT>            mediaTracker.addImage(img, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">817  </FONT>            </FONT><FONT COLOR="#808080"><I>//Esperamos a que finalice la carga</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">818  </FONT>            mediaTracker.waitForID(</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">819  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">820  </FONT>            </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> w = img.getWidth(</FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">821  </FONT>            </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> h = img.getHeight(</FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">822  </FONT>            </FONT><FONT COLOR="#808080"><I>//Avisar de que vamos a cargar una imagen muy grande</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">823  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (w * h &GT; </FONT><FONT COLOR="#0000ff">6000</FONT><FONT COLOR="#000000">){ 
<FONT COLOR=0 STYLE="font-style:normal">824  </FONT>              </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> String mensaje = </FONT><FONT COLOR="#008000"><B>"La imagen tiene "</B></FONT><FONT COLOR="#000000"> + (w * h) + </FONT><FONT COLOR="#008000"><B>" puntos, continuar?"</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">825  </FONT>              </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (JOptionPane.YES_OPTION != JOptionPane.showConfirmDialog(m_LoadImageButton, mensaje)) 
<FONT COLOR=0 STYLE="font-style:normal">826  </FONT>                </FONT><FONT COLOR="#000080"><B>throw</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Exception(</FONT><FONT COLOR="#008000"><B>"La imagen es demasiado grande"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">827  </FONT>            } 
<FONT COLOR=0 STYLE="font-style:normal">828  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">829  </FONT>            </FONT><FONT COLOR="#808080"><I>//Volcamos los pixeles de la imagen a un array de enteros</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">830  </FONT>            </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">[] rgbs = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">[w * h]; 
<FONT COLOR=0 STYLE="font-style:normal">831  </FONT>            PixelGrabber pg = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> PixelGrabber(img, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, w, h, rgbs, </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, w); 
<FONT COLOR=0 STYLE="font-style:normal">832  </FONT>            pg.grabPixels(); 
<FONT COLOR=0 STYLE="font-style:normal">833  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> ((pg.getStatus() & ImageObserver.ABORT) != </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">) 
<FONT COLOR=0 STYLE="font-style:normal">834  </FONT>              </FONT><FONT COLOR="#000080"><B>throw</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Exception(</FONT><FONT COLOR="#008000"><B>"Image fetch aborted or errored"</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">835  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">836  </FONT>            </FONT><FONT COLOR="#808080"><I>//Creamos las instancias con el array de enteros</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">837  </FONT>            m_Points.createFromImage(rgbs, w, h); 
<FONT COLOR=0 STYLE="font-style:normal">838  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">839  </FONT>            </FONT><FONT COLOR="#808080"><I>//Escalamos si es preciso los puntos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">840  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000">(m_ScaleAfterLoadCB.isSelected()) 
<FONT COLOR=0 STYLE="font-style:normal">841  </FONT>              scaleInstancesFromImage(m_Points, m_DrawingPanel.getWidth(), m_DrawingPanel.getHeight(), w, h); 
<FONT COLOR=0 STYLE="font-style:normal">842  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">843  </FONT>            </FONT><FONT COLOR="#808080"><I>//Actualizamos las etiquetas de los botones de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">844  </FONT>            updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">845  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">846  </FONT>            </FONT><FONT COLOR="#808080"><I>//Hemos conseguid cargar las instancias con éxito</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">847  </FONT>            isFailed = </FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">848  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">849  </FONT>          </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">850  </FONT>            JOptionPane.showMessageDialog(m_LoadARFFButton, 
<FONT COLOR=0 STYLE="font-style:normal">851  </FONT>                                          </FONT><FONT COLOR="#008000"><B>"Couldn't read '"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">852  </FONT>                                          + imageName + </FONT><FONT COLOR="#008000"><B>"' as an image file.\n"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">853  </FONT>                                          + </FONT><FONT COLOR="#008000"><B>"Reason:\n"</B></FONT><FONT COLOR="#000000"> + ex.getMessage(), 
<FONT COLOR=0 STYLE="font-style:normal">854  </FONT>                                          </FONT><FONT COLOR="#008000"><B>"Load Image"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">855  </FONT>                                          JOptionPane.ERROR_MESSAGE); 
<FONT COLOR=0 STYLE="font-style:normal">856  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">857  </FONT>          </FONT><FONT COLOR="#000080"><B>finally</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">858  </FONT>            </FONT><FONT COLOR="#808080"><I>//Volvemos al modo de edición, del que ya veníamos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">859  </FONT>            enterEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">860  </FONT>            </FONT><FONT COLOR="#808080"><I>//Notificar que ya hemos acabado de cargar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">861  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000">(isFailed) 
<FONT COLOR=0 STYLE="font-style:normal">862  </FONT>              notifyMediators(INSTANCES_LOAD_FAIL, imageName); 
<FONT COLOR=0 STYLE="font-style:normal">863  </FONT>            </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">864  </FONT>              notifyMediators(INSTANCES_LOAD_FINISH, imageName); 
<FONT COLOR=0 STYLE="font-style:normal">865  </FONT>            </FONT><FONT COLOR="#808080"><I>//Podemos empezar otra operación de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">866  </FONT>            m_IOThread = </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">867  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">868  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">869  </FONT>      }; 
<FONT COLOR=0 STYLE="font-style:normal">870  </FONT>      m_IOThread.setPriority(Thread.MIN_PRIORITY); </FONT><FONT COLOR="#808080"><I>//El interfaz debe tener mayor prioridad</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">871  </FONT>      m_IOThread.start(); 
<FONT COLOR=0 STYLE="font-style:normal">872  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">873  </FONT>    </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">874  </FONT>      JOptionPane.showMessageDialog(</FONT><FONT COLOR="#000080"><B>this</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">875  </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Can't load at this time,\n"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">876  </FONT>                                    + </FONT><FONT COLOR="#008000"><B>"currently busy with other IO"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">877  </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Load Image"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">878  </FONT>                                    JOptionPane.WARNING_MESSAGE); 
<FONT COLOR=0 STYLE="font-style:normal">879  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">880  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">881  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">882  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">883  </FONT>   * Salvar las instancias seleccionadas a un archivo con formato ARFF; lo hacemos 
<FONT COLOR=0 STYLE="font-style:normal">884  </FONT>   * en el thread de I/O, con prioridad mínima, no permitiendo más de una operación 
<FONT COLOR=0 STYLE="font-style:normal">885  </FONT>   * de I/O (salvo la de salvar la imagen) estar ejecutándse concurrentemente. 
<FONT COLOR=0 STYLE="font-style:normal">886  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">887  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> f El archivo 
<FONT COLOR=0 STYLE="font-style:normal">888  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> inst Las instancias a salvar 
<FONT COLOR=0 STYLE="font-style:normal">889  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">890  </FONT>  </FONT><FONT COLOR="#000080"><B>protected</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> saveInstancesToFile(</FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> File f, </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> Instances inst){ 
<FONT COLOR=0 STYLE="font-style:normal">891  </FONT>    </FONT><FONT COLOR="#808080"><I>//Comprobar que no estemos realizando ya otra operación de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">892  </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_IOThread == </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">){ 
<FONT COLOR=0 STYLE="font-style:normal">893  </FONT>      m_IOThread = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Thread(){ 
<FONT COLOR=0 STYLE="font-style:normal">894  </FONT>        </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> run(){ 
<FONT COLOR=0 STYLE="font-style:normal">895  </FONT>          </FONT><FONT COLOR="#808080"><I>//Evitamos cambiar las instancias mientras estamos salvando</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">896  </FONT>          exitEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">897  </FONT>          </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">898  </FONT>            </FONT><FONT COLOR="#808080"><I>//Comunicar a los mediadores que hemos empezado a salvar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">899  </FONT>            notifyMediators(INSTANCES_SAVE_START, f); 
<FONT COLOR=0 STYLE="font-style:normal">900  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">901  </FONT>            </FONT><FONT COLOR="#808080"><I>//Abrimos el stream de salida al fichero</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">902  </FONT>            Writer w = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> BufferedWriter(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FileWriter(f)); 
<FONT COLOR=0 STYLE="font-style:normal">903  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">904  </FONT>            </FONT><FONT COLOR="#808080"><I>//Escribimos las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">905  </FONT>            w.write(inst.toString()); 
<FONT COLOR=0 STYLE="font-style:normal">906  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">907  </FONT>            </FONT><FONT COLOR="#808080"><I>//Cerramos el stream de salida al fichero</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">908  </FONT>            w.close(); 
<FONT COLOR=0 STYLE="font-style:normal">909  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">910  </FONT>          </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">911  </FONT>            ex.printStackTrace(); 
<FONT COLOR=0 STYLE="font-style:normal">912  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">913  </FONT>          </FONT><FONT COLOR="#000080"><B>finally</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">914  </FONT>            </FONT><FONT COLOR="#808080"><I>//Notificar que ya hemos acabado de salvar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">915  </FONT>            notifyMediators(INSTANCES_SAVE_FINISH, f); 
<FONT COLOR=0 STYLE="font-style:normal">916  </FONT>            </FONT><FONT COLOR="#808080"><I>//Volvemos al modo de edición, del que ya veníamos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">917  </FONT>            enterEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">918  </FONT>            </FONT><FONT COLOR="#808080"><I>//Podemos volver a ejecutar operaciones de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">919  </FONT>            m_IOThread = </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">920  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">921  </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">922  </FONT>      }; 
<FONT COLOR=0 STYLE="font-style:normal">923  </FONT>      m_IOThread.setPriority(Thread.MIN_PRIORITY); </FONT><FONT COLOR="#808080"><I>//El interfaz debe tener mayor prioridad</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">924  </FONT>      m_IOThread.start(); 
<FONT COLOR=0 STYLE="font-style:normal">925  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">926  </FONT>    </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">927  </FONT>      </FONT><FONT COLOR="#808080"><I>//No podemos hacerlo, pues ya estamos ocupados con otra operación de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">928  </FONT>      JOptionPane.showMessageDialog(</FONT><FONT COLOR="#000080"><B>this</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">929  </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Can't save at this time,\n"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">930  </FONT>                                    + </FONT><FONT COLOR="#008000"><B>"currently busy with other IO"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">931  </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Save Instances"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">932  </FONT>                                    JOptionPane.WARNING_MESSAGE); 
<FONT COLOR=0 STYLE="font-style:normal">933  </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">934  </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">935  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">936  </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">937  </FONT>   * Cargar las instancias desde un archivo con formato ARFF; lo hacemos 
<FONT COLOR=0 STYLE="font-style:normal">938  </FONT>   * en el thread de I/O, con prioridad mínima, no permitiendo más de una operación 
<FONT COLOR=0 STYLE="font-style:normal">939  </FONT>   * de I/O (salvo la de salvar la imagen) estar ejecutándse concurrentemente. 
<FONT COLOR=0 STYLE="font-style:normal">940  </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">941  </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> f El archivo 
<FONT COLOR=0 STYLE="font-style:normal">942  </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">943  </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> loadInstancesFromFile(</FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> File f){ 
<FONT COLOR=0 STYLE="font-style:normal">944  </FONT>    </FONT><FONT COLOR="#808080"><I>//Comprobar que no estemos realizando ya otra operación de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">945  </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_IOThread == </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">){ 
<FONT COLOR=0 STYLE="font-style:normal">946  </FONT>      m_IOThread = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Thread(){ 
<FONT COLOR=0 STYLE="font-style:normal">947  </FONT>        </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> run(){ 
<FONT COLOR=0 STYLE="font-style:normal">948  </FONT>          </FONT><FONT COLOR="#808080"><I>//Bandera que indica si el proceso ha acabado regularmente o ha fallado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">949  </FONT>          </FONT><FONT COLOR="#000080"><B>boolean</B></FONT><FONT COLOR="#000000"> isFailed = </FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">950  </FONT>          </FONT><FONT COLOR="#808080"><I>//Evitamos cambiar las instancias mientras estamos salvando</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">951  </FONT>          exitEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">952  </FONT>          </FONT><FONT COLOR="#000080"><B>try</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">953  </FONT>            </FONT><FONT COLOR="#808080"><I>//Comunicar a los mediadores que hemos empezado a cargar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">954  </FONT>            notifyMediators(INSTANCES_LOAD_START, f); 
<FONT COLOR=0 STYLE="font-style:normal">955  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">956  </FONT>            </FONT><FONT COLOR="#808080"><I>//Abrimos el stream de entrada asociado al fichero</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">957  </FONT>            Reader r = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> BufferedReader(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FileReader(f)); 
<FONT COLOR=0 STYLE="font-style:normal">958  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">959  </FONT>            </FONT><FONT COLOR="#808080"><I>//Volcamos las instancias del fichero a memoria principal</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">960  </FONT>            Instances tmp = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Instances(r); 
<FONT COLOR=0 STYLE="font-style:normal">961  </FONT>            tmp.setClassIndex(</FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">962  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">963  </FONT>            </FONT><FONT COLOR="#808080"><I>//Metemos las instancias en la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">964  </FONT>            m_Points.createFromInstances(tmp); 
<FONT COLOR=0 STYLE="font-style:normal">965  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">966  </FONT>            </FONT><FONT COLOR="#808080"><I>//Cerramos el stream de entrada</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">967  </FONT>            r.close(); 
<FONT COLOR=0 STYLE="font-style:normal">968  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">969  </FONT>            </FONT><FONT COLOR="#808080"><I>//Las operaciones de undo & redo ya no son vigentes</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">970  </FONT>            flushRedoAndUndoBuffers(); 
<FONT COLOR=0 STYLE="font-style:normal">971  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">972  </FONT>            </FONT><FONT COLOR="#808080"><I>//Actualizamos el texto de los botones de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">973  </FONT>            updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">974  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">975  </FONT>            </FONT><FONT COLOR="#808080"><I>//Si las instancias no cumplen con el requisito de haber sido salvadas con</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">976  </FONT>            </FONT><FONT COLOR="#808080"><I>//esta misma aplicación, tratamos de reescalarlas para que aparezcan en pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">977  </FONT>            </FONT><FONT COLOR="#808080"><I>//correctamente y hacemos que su nombre cumpla con los estándares</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">978  </FONT>            </FONT><FONT COLOR="#808080"><I>//de la aplicación (comience con "oaidtb_")</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">979  </FONT>            </FONT><FONT COLOR="#808080"><I>//¡Ojo!, desvirtúa los valores de las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">980  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_ScaleAfterLoadCB.isSelected()) </FONT><FONT COLOR="#808080"><I>//&&!tmp.relationName.startsWit("oaidt_")</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">981  </FONT>              scaleInstances(m_Points, m_DrawingPanel.getWidth(), m_DrawingPanel.getHeight()); 
<FONT COLOR=0 STYLE="font-style:normal">982  </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">983  </FONT>            </FONT><FONT COLOR="#808080"><I>//Hemos conseguid cargar las instancias con éxito</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">984  </FONT>            isFailed = </FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">985  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">986  </FONT>          </FONT><FONT COLOR="#000080"><B>catch</B></FONT><FONT COLOR="#000000"> (Exception ex){ 
<FONT COLOR=0 STYLE="font-style:normal">987  </FONT>            JOptionPane.showMessageDialog(m_LoadARFFButton, 
<FONT COLOR=0 STYLE="font-style:normal">988  </FONT>                                          </FONT><FONT COLOR="#008000"><B>"Couldn't read '"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">989  </FONT>                                          + f.getName() + </FONT><FONT COLOR="#008000"><B>"' as an arff file.\n"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">990  </FONT>                                          + </FONT><FONT COLOR="#008000"><B>"Reason:\n"</B></FONT><FONT COLOR="#000000"> + ex.getMessage(), 
<FONT COLOR=0 STYLE="font-style:normal">991  </FONT>                                          </FONT><FONT COLOR="#008000"><B>"Load Instances"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">992  </FONT>                                          JOptionPane.ERROR_MESSAGE); 
<FONT COLOR=0 STYLE="font-style:normal">993  </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">994  </FONT>          </FONT><FONT COLOR="#000080"><B>finally</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">995  </FONT>            </FONT><FONT COLOR="#808080"><I>//Notificar que ya hemos acabado de cargar las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">996  </FONT>            </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000">(isFailed) 
<FONT COLOR=0 STYLE="font-style:normal">997  </FONT>              notifyMediators(INSTANCES_LOAD_FAIL, f); 
<FONT COLOR=0 STYLE="font-style:normal">998  </FONT>            </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">999  </FONT>              notifyMediators(INSTANCES_LOAD_FINISH, f); 
<FONT COLOR=0 STYLE="font-style:normal">1000 </FONT>            </FONT><FONT COLOR="#808080"><I>//Volvemos al modo de edición, del que ya veníamos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1001 </FONT>            enterEditMode(); 
<FONT COLOR=0 STYLE="font-style:normal">1002 </FONT>            </FONT><FONT COLOR="#808080"><I>//Podemos volver a ejecutar operaciones de I/O</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1003 </FONT>            m_IOThread = </FONT><FONT COLOR="#000080"><B>null</B></FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1004 </FONT>          } 
<FONT COLOR=0 STYLE="font-style:normal">1005 </FONT>        } 
<FONT COLOR=0 STYLE="font-style:normal">1006 </FONT>      }; </FONT><FONT COLOR="#808080"><I>//RUN</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1007 </FONT>      m_IOThread.setPriority(Thread.MIN_PRIORITY); </FONT><FONT COLOR="#808080"><I>// UI has most priority</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1008 </FONT>      m_IOThread.start(); 
<FONT COLOR=0 STYLE="font-style:normal">1009 </FONT>    }</FONT><FONT COLOR="#808080"><I>//(m_IOThread != null)</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1010 </FONT>    </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">1011 </FONT>      JOptionPane.showMessageDialog(</FONT><FONT COLOR="#000080"><B>this</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1012 </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Can't load at this time,\n"</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1013 </FONT>                                    + </FONT><FONT COLOR="#008000"><B>"currently busy with other IO"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1014 </FONT>                                    </FONT><FONT COLOR="#008000"><B>"Load Instances"</B></FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1015 </FONT>                                    JOptionPane.WARNING_MESSAGE); 
<FONT COLOR=0 STYLE="font-style:normal">1016 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1017 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1018 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1019 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1020 </FONT>   * Traslada los puntos que corresponden a las instancias, de manera que 
<FONT COLOR=0 STYLE="font-style:normal">1021 </FONT>   * no haya coordenadas negativas, y las escala de manera 
<FONT COLOR=0 STYLE="font-style:normal">1022 </FONT>   * que dichas coordenadas estén siempre en el rectángulo 
<FONT COLOR=0 STYLE="font-style:normal">1023 </FONT>   * (0, 0, w, h). 
<FONT COLOR=0 STYLE="font-style:normal">1024 </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">1025 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> instances Las instancias a escalar y trasladar 
<FONT COLOR=0 STYLE="font-style:normal">1026 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> w La anchura del rectángulo 
<FONT COLOR=0 STYLE="font-style:normal">1027 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> h La altura del rectángulo 
<FONT COLOR=0 STYLE="font-style:normal">1028 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1029 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> scaleInstances(</FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances</A> instances, </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> w, </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> h){ 
<FONT COLOR=0 STYLE="font-style:normal">1030 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1031 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000">(w &LT;=</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> || h &LT;= </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">) 
<FONT COLOR=0 STYLE="font-style:normal">1032 </FONT>      </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000">; </FONT><FONT COLOR="#808080"><I>//throw Exception</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1033 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1034 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> minXValue = Double.MAX_VALUE; 
<FONT COLOR=0 STYLE="font-style:normal">1035 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> maxXValue = Double.MIN_VALUE; 
<FONT COLOR=0 STYLE="font-style:normal">1036 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> minYValue = Double.MAX_VALUE; 
<FONT COLOR=0 STYLE="font-style:normal">1037 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> maxYValue = Double.MIN_VALUE; 
<FONT COLOR=0 STYLE="font-style:normal">1038 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1039 </FONT>    </FONT><FONT COLOR="#808080"><I>//Buscamos los valores mínimos y máximos de las coordenadas de las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1040 </FONT>    </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; instances.numInstances(); i++){ 
<FONT COLOR=0 STYLE="font-style:normal">1041 </FONT>      <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A> instance = (<A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A>) instances.instance(i); 
<FONT COLOR=0 STYLE="font-style:normal">1042 </FONT>      </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> x = instance.getX(); 
<FONT COLOR=0 STYLE="font-style:normal">1043 </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (x &LT; minXValue) 
<FONT COLOR=0 STYLE="font-style:normal">1044 </FONT>        minXValue = x; 
<FONT COLOR=0 STYLE="font-style:normal">1045 </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (x &GT; maxXValue) 
<FONT COLOR=0 STYLE="font-style:normal">1046 </FONT>        maxXValue = x; 
<FONT COLOR=0 STYLE="font-style:normal">1047 </FONT>      </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> y = instance.getY(); 
<FONT COLOR=0 STYLE="font-style:normal">1048 </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (y &LT; minYValue) 
<FONT COLOR=0 STYLE="font-style:normal">1049 </FONT>        minYValue = y; 
<FONT COLOR=0 STYLE="font-style:normal">1050 </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (y &GT; maxYValue) 
<FONT COLOR=0 STYLE="font-style:normal">1051 </FONT>        maxYValue = y; 
<FONT COLOR=0 STYLE="font-style:normal">1052 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1053 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1054 </FONT>    </FONT><FONT COLOR="#808080"><I>//Calculamos el desplazamiento que sufrirán los puntos para que no existan coordenadas negativas</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1055 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> xTranslate = minXValue &LT; </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> ? -minXValue : </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1056 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> yTranslate = minYValue &LT; </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> ? -minYValue : </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1057 </FONT>    </FONT><FONT COLOR="#808080"><I>//Calculamos los factores de escalado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1058 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> xScale = (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) (w - </FONT><FONT COLOR="#0000ff">10</FONT><FONT COLOR="#000000">) / (maxXValue + xTranslate); 
<FONT COLOR=0 STYLE="font-style:normal">1059 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> yScale = (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) (h - </FONT><FONT COLOR="#0000ff">10</FONT><FONT COLOR="#000000">) / (maxYValue + yTranslate); 
<FONT COLOR=0 STYLE="font-style:normal">1060 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1061 </FONT>    </FONT><FONT COLOR="#808080"><I>//Trasladamos y escalamos todas las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1062 </FONT>    </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; instances.numInstances(); i++){ 
<FONT COLOR=0 STYLE="font-style:normal">1063 </FONT>      <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A> instance = (<A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A>) instances.instance(i); 
<FONT COLOR=0 STYLE="font-style:normal">1064 </FONT>      instance.setX(instance.getX() * xScale + xTranslate); 
<FONT COLOR=0 STYLE="font-style:normal">1065 </FONT>      instance.setY(instance.getY() * yScale + yTranslate); 
<FONT COLOR=0 STYLE="font-style:normal">1066 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1067 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1068 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1069 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1070 </FONT>   * Escala los puntos que corresponden a las instancias (construidas desde una imagen), 
<FONT COLOR=0 STYLE="font-style:normal">1071 </FONT>   * de manera que ocupen todo el rectángulo del panel de dibujado que se ve en pantalla 
<FONT COLOR=0 STYLE="font-style:normal">1072 </FONT>   * (0, 0, w, h). 
<FONT COLOR=0 STYLE="font-style:normal">1073 </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">1074 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> instances Las instancias a escalar y trasladar 
<FONT COLOR=0 STYLE="font-style:normal">1075 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> w La anchura del rectángulo 
<FONT COLOR=0 STYLE="font-style:normal">1076 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> h La altura del rectángulo 
<FONT COLOR=0 STYLE="font-style:normal">1077 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> imgW La anchura de la imagen 
<FONT COLOR=0 STYLE="font-style:normal">1078 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> imgH La altura de la imagen 
<FONT COLOR=0 STYLE="font-style:normal">1079 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1080 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> scaleInstancesFromImage(</FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances</A> instances, 
<FONT COLOR=0 STYLE="font-style:normal">1081 </FONT>                                                    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> w, </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> h, 
<FONT COLOR=0 STYLE="font-style:normal">1082 </FONT>                                                    </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> imgW, </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> imgH){ 
<FONT COLOR=0 STYLE="font-style:normal">1083 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1084 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000">(w &LT;=</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000"> || h &LT;= </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">) 
<FONT COLOR=0 STYLE="font-style:normal">1085 </FONT>      </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000">; </FONT><FONT COLOR="#808080"><I>//throw Exception</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1086 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1087 </FONT>    </FONT><FONT COLOR="#808080"><I>//Calculamos los factores de escalado</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1088 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> xScale = (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) w  / (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) imgW; 
<FONT COLOR=0 STYLE="font-style:normal">1089 </FONT>    </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000"> yScale = (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) h / (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">) imgH; 
<FONT COLOR=0 STYLE="font-style:normal">1090 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1091 </FONT>    </FONT><FONT COLOR="#808080"><I>//Trasladamos y escalamos todas las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1092 </FONT>    </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; instances.numInstances(); i++){ 
<FONT COLOR=0 STYLE="font-style:normal">1093 </FONT>      <A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A> instance = (<A href="..\..\oaidtb\gui\Point2DInstances.java.html">Point2DInstances.Point2DInstance</A>) instances.instance(i); 
<FONT COLOR=0 STYLE="font-style:normal">1094 </FONT>      instance.setX(instance.getX() * xScale); 
<FONT COLOR=0 STYLE="font-style:normal">1095 </FONT>      instance.setY(instance.getY() * yScale); 
<FONT COLOR=0 STYLE="font-style:normal">1096 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1097 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1098 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1099 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1100 </FONT>   * Distribución de los componentes en el panel 
<FONT COLOR=0 STYLE="font-style:normal">1101 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1102 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> layoutComponents(){ 
<FONT COLOR=0 STYLE="font-style:normal">1103 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1104 </FONT>    setLayout(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagLayout()); 
<FONT COLOR=0 STYLE="font-style:normal">1105 </FONT>    GridBagConstraints gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1106 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1107 </FONT>    </FONT><FONT COLOR="#808080"><I>//Botones de selección de colores.</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1108 </FONT>    JPanel colorButtonsPanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridLayout(</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1109 </FONT>    colorButtonsPanel.add(m_Color1Button); 
<FONT COLOR=0 STYLE="font-style:normal">1110 </FONT>    colorButtonsPanel.add(m_Color2Button); 
<FONT COLOR=0 STYLE="font-style:normal">1111 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1112 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1113 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1114 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1115 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1116 </FONT>    add(colorButtonsPanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1117 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1118 </FONT>    </FONT><FONT COLOR="#808080"><I>//Reset constraints</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1119 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1120 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1121 </FONT>    </FONT><FONT COLOR="#808080"><I>//Modo de inserción</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1122 </FONT>    JPanel addModePanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagLayout()); 
<FONT COLOR=0 STYLE="font-style:normal">1123 </FONT>    ButtonGroup bg = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ButtonGroup(); 
<FONT COLOR=0 STYLE="font-style:normal">1124 </FONT>    bg.add(m_SinglePointAddCB); 
<FONT COLOR=0 STYLE="font-style:normal">1125 </FONT>    bg.add(m_MultiplePointAddCB); 
<FONT COLOR=0 STYLE="font-style:normal">1126 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1127 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1128 </FONT>    addModePanel.add(m_SinglePointAddCB, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1129 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1130 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1131 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1132 </FONT>    addModePanel.add(m_InsertModeCoB, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1133 </FONT>    JPanel distribPanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagLayout()); 
<FONT COLOR=0 STYLE="font-style:normal">1134 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1135 </FONT>    distribPanel.add(m_MultiplePointAddCB, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1136 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1137 </FONT>    m_NumPointsToAddPerClickTF.setColumns(</FONT><FONT COLOR="#0000ff">3</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1138 </FONT>    m_NumPointsToAddPerClickTF.setHorizontalAlignment(JTextField.RIGHT); 
<FONT COLOR=0 STYLE="font-style:normal">1139 </FONT>    distribPanel.add(m_NumPointsToAddPerClickTF); 
<FONT COLOR=0 STYLE="font-style:normal">1140 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1141 </FONT>    distribPanel.add(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JLabel(</FONT><FONT COLOR="#008000"><B>"points using"</B></FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1142 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">3</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1143 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1144 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1145 </FONT>    distribPanel.add(m_DistributionSelector); 
<FONT COLOR=0 STYLE="font-style:normal">1146 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1147 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1148 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1149 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1150 </FONT>    addModePanel.add(distribPanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1151 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1152 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1153 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1154 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1155 </FONT>    add(addModePanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1156 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1157 </FONT>    </FONT><FONT COLOR="#808080"><I>//Reset constraints</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1158 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1159 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1160 </FONT>    </FONT><FONT COLOR="#808080"><I>//Botones de undo & redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1161 </FONT>    JPanel undoPanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridLayout(</FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1162 </FONT>    undoPanel.add(m_UndoButton); 
<FONT COLOR=0 STYLE="font-style:normal">1163 </FONT>    undoPanel.add(m_RedoButton); 
<FONT COLOR=0 STYLE="font-style:normal">1164 </FONT>    undoPanel.add(m_FastEraseMode); 
<FONT COLOR=0 STYLE="font-style:normal">1165 </FONT>    undoPanel.add(m_FlushButton); 
<FONT COLOR=0 STYLE="font-style:normal">1166 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1167 </FONT>    undoPanel.setBorder(BorderFactory.createTitledBorder(</FONT><FONT COLOR="#008000"><B>"Undo insertion"</B></FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1168 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1169 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1170 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1171 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1172 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1173 </FONT>    add(undoPanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1174 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1175 </FONT>    </FONT><FONT COLOR="#808080"><I>//Reset constraints</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1176 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1177 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1178 </FONT>    </FONT><FONT COLOR="#808080"><I>//Partición de las instancias en conjuntos de entrenamiento y test; reset</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1179 </FONT>    JPanel splitPanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagLayout()); 
<FONT COLOR=0 STYLE="font-style:normal">1180 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1181 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1182 </FONT>    splitPanel.add(m_TrainPercentageLS.getSlider()); 
<FONT COLOR=0 STYLE="font-style:normal">1183 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1184 </FONT>    splitPanel.add(m_TrainPercentageLS.getLabel()); 
<FONT COLOR=0 STYLE="font-style:normal">1185 </FONT>    JPanel butPan = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridLayout(</FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1186 </FONT>    butPan.add(m_SplitButton); 
<FONT COLOR=0 STYLE="font-style:normal">1187 </FONT>    butPan.add(m_JoinButton); 
<FONT COLOR=0 STYLE="font-style:normal">1188 </FONT>    butPan.add(m_UseOnlyInstancesInRegionCB); 
<FONT COLOR=0 STYLE="font-style:normal">1189 </FONT>    butPan.add(m_ResetButton); 
<FONT COLOR=0 STYLE="font-style:normal">1190 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1191 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1192 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1193 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1194 </FONT>    splitPanel.add(butPan, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1195 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1196 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">3</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1197 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1198 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1199 </FONT>    add(splitPanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1200 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1201 </FONT>    </FONT><FONT COLOR="#808080"><I>//Reset constraints</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1202 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1203 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1204 </FONT>    </FONT><FONT COLOR="#808080"><I>//Modo zoom</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1205 </FONT>    JPanel zoomPanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> FlowLayout(FlowLayout.CENTER)); 
<FONT COLOR=0 STYLE="font-style:normal">1206 </FONT>    zoomPanel.add(m_ZoomModeCB); 
<FONT COLOR=0 STYLE="font-style:normal">1207 </FONT>    zoomPanel.add(m_ZoomOutButton); 
<FONT COLOR=0 STYLE="font-style:normal">1208 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1209 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">5</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1210 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1211 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1212 </FONT>    add(zoomPanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1213 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1214 </FONT>    </FONT><FONT COLOR="#808080"><I>//Reset constraints</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1215 </FONT>    gbc = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridBagConstraints(); 
<FONT COLOR=0 STYLE="font-style:normal">1216 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1217 </FONT>    </FONT><FONT COLOR="#808080"><I>//Botones de open & save</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1218 </FONT>    JPanel openAndSavePanel = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> GridLayout(</FONT><FONT COLOR="#0000ff">3</FONT><FONT COLOR="#000000">, </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">)); 
<FONT COLOR=0 STYLE="font-style:normal">1219 </FONT>    openAndSavePanel.add(m_LoadARFFButton); 
<FONT COLOR=0 STYLE="font-style:normal">1220 </FONT>    openAndSavePanel.add(m_SaveARFFButton); 
<FONT COLOR=0 STYLE="font-style:normal">1221 </FONT>    openAndSavePanel.add(m_ScaleAfterLoadCB); 
<FONT COLOR=0 STYLE="font-style:normal">1222 </FONT>    openAndSavePanel.add(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> JPanel()); 
<FONT COLOR=0 STYLE="font-style:normal">1223 </FONT>    openAndSavePanel.add(m_LoadImageButton); 
<FONT COLOR=0 STYLE="font-style:normal">1224 </FONT>    openAndSavePanel.add(m_SaveImageButton); 
<FONT COLOR=0 STYLE="font-style:normal">1225 </FONT>    gbc.gridx = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1226 </FONT>    gbc.gridy = </FONT><FONT COLOR="#0000ff">6</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1227 </FONT>    gbc.fill = GridBagConstraints.HORIZONTAL; 
<FONT COLOR=0 STYLE="font-style:normal">1228 </FONT>    gbc.gridwidth = GridBagConstraints.REMAINDER; 
<FONT COLOR=0 STYLE="font-style:normal">1229 </FONT>    add(openAndSavePanel, gbc); 
<FONT COLOR=0 STYLE="font-style:normal">1230 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1231 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1232 </FONT>  </FONT><FONT COLOR="#808080"><I>/** </I></FONT><FONT COLOR="#808080"><B>@return</B></FONT><FONT COLOR="#808080"><I> El panel de dibujado que controla este panel de edición de instancias */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1233 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\gui\DrawingPanel.java.html">DrawingPanel</A> getDrawingPanel(){ 
<FONT COLOR=0 STYLE="font-style:normal">1234 </FONT>    </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000"> m_DrawingPanel; 
<FONT COLOR=0 STYLE="font-style:normal">1235 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1236 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1237 </FONT>  </FONT><FONT COLOR="#808080"><I>//////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1238 </FONT>  </FONT><FONT COLOR="#808080"><I>////// UNDO & REDO FEATURES //////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1239 </FONT>  </FONT><FONT COLOR="#808080"><I>//////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1240 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1241 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1242 </FONT>   * Informar que se han añadido nuevos puntos mediante un click de ratón 
<FONT COLOR=0 STYLE="font-style:normal">1243 </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">1244 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@param</B></FONT><FONT COLOR="#808080"><I> number El número de instancias añadidas 
<FONT COLOR=0 STYLE="font-style:normal">1245 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1246 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> newInsertionOp(</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> number){ 
<FONT COLOR=0 STYLE="font-style:normal">1247 </FONT>    m_NumberOfInserted.add(</FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\SimpleInteger.java.html">SimpleInteger</A>(number)); 
<FONT COLOR=0 STYLE="font-style:normal">1248 </FONT>    m_UndoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1249 </FONT>    m_FlushButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1250 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1251 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1252 </FONT>  </FONT><FONT COLOR="#808080"><I>/** </I></FONT><FONT COLOR="#808080"><B>@return</B></FONT><FONT COLOR="#808080"><I> El número de instancias añadidas con el último click de ratón no deshecho*/</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1253 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> numberOfLastInserted(){ 
<FONT COLOR=0 STYLE="font-style:normal">1254 </FONT>    </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000"> ((<A href="..\..\oaidtb\misc\SimpleInteger.java.html">SimpleInteger</A>) m_NumberOfInserted.get(m_NumberOfInserted.size() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">)).value; 
<FONT COLOR=0 STYLE="font-style:normal">1255 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1256 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1257 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1258 </FONT>   * Deshace la última inserción de instancias a través del ratón 
<FONT COLOR=0 STYLE="font-style:normal">1259 </FONT>   * 
<FONT COLOR=0 STYLE="font-style:normal">1260 </FONT>   * </I></FONT><FONT COLOR="#808080"><B>@throws</B></FONT><FONT COLOR="#808080"><I> Exception Si ocurre algún error al borrar las instancias de la base de datos 
<FONT COLOR=0 STYLE="font-style:normal">1261 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1262 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> undoInsertion() </FONT><FONT COLOR="#000080"><B>throws</B></FONT><FONT COLOR="#000000"> Exception{ 
<FONT COLOR=0 STYLE="font-style:normal">1263 </FONT>    </FONT><FONT COLOR="#808080"><I>//Comprobamos que haya algo que deshacer</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1264 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (!m_NumberOfInserted.isEmpty()){ 
<FONT COLOR=0 STYLE="font-style:normal">1265 </FONT>      </FONT><FONT COLOR="#808080"><I>//Borramos las instancias de la base de datos</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1266 </FONT>      </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">[][] tmp = m_Points.removeLastPoints(numberOfLastInserted()); 
<FONT COLOR=0 STYLE="font-style:normal">1267 </FONT>      </FONT><FONT COLOR="#808080"><I>//Guardamos las instancias para poder rehacer la operación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1268 </FONT>      m_RedoBuffer.add(tmp); 
<FONT COLOR=0 STYLE="font-style:normal">1269 </FONT>      </FONT><FONT COLOR="#808080"><I>//Eliminamos esta operación de undo del buffer</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1270 </FONT>      m_NumberOfInserted.remove(m_NumberOfInserted.size() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1271 </FONT>      </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_FastEraseMode.isSelected()) 
<FONT COLOR=0 STYLE="font-style:normal">1272 </FONT>        </FONT><FONT COLOR="#808080"><I>//Vamos borrando una a una las instancias de la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1273 </FONT>        </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">; i &LT; tmp.length; i++) 
<FONT COLOR=0 STYLE="font-style:normal">1274 </FONT>          m_DrawingPanel.erasePoint(tmp[i][</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">], tmp[i][</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">]); 
<FONT COLOR=0 STYLE="font-style:normal">1275 </FONT>      </FONT><FONT COLOR="#000080"><B>else</B></FONT><FONT COLOR="#000000">{ 
<FONT COLOR=0 STYLE="font-style:normal">1276 </FONT>        </FONT><FONT COLOR="#808080"><I>//Repintamos todas las instancias</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1277 </FONT>        m_DrawingPanel.setUpdateInstances(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1278 </FONT>        m_DrawingPanel.repaint(); 
<FONT COLOR=0 STYLE="font-style:normal">1279 </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">1280 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1281 </FONT>    </FONT><FONT COLOR="#808080"><I>//En caso de que sea el último elemento del buffer de undo, deshabilitamos la operación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1282 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_NumberOfInserted.isEmpty()) 
<FONT COLOR=0 STYLE="font-style:normal">1283 </FONT>      m_UndoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1284 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1285 </FONT>    </FONT><FONT COLOR="#808080"><I>//Habilitar la acción de redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1286 </FONT>    m_RedoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1287 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1288 </FONT>    </FONT><FONT COLOR="#808080"><I>//Actualizar el texto de los botones de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1289 </FONT>    updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">1290 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1291 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1292 </FONT>  </FONT><FONT COLOR="#808080"><I>/** Rehace la última inserción de instancias a través del ratón deshecha  */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1293 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>synchronized</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> redoInsertion(){ 
<FONT COLOR=0 STYLE="font-style:normal">1294 </FONT>    </FONT><FONT COLOR="#808080"><I>//Comprobamos que haya algo que deshacer</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1295 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (!m_RedoBuffer.isEmpty()){ 
<FONT COLOR=0 STYLE="font-style:normal">1296 </FONT>      </FONT><FONT COLOR="#808080"><I>//Accedemos las instancias que tenemos que volver a insertar</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1297 </FONT>      </FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">[][] opsToRedo = (</FONT><FONT COLOR="#000080"><B>double</B></FONT><FONT COLOR="#000000">[][]) m_RedoBuffer.get(m_RedoBuffer.size() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1298 </FONT>      </FONT><FONT COLOR="#808080"><I>//Metemos cada punto en la base de datos y lo pintamos en la pantalla</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1299 </FONT>      </FONT><FONT COLOR="#000080"><B>for</B></FONT><FONT COLOR="#000000"> (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> i = opsToRedo.length - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; i &GT; -</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">; i--){ 
<FONT COLOR=0 STYLE="font-style:normal">1300 </FONT>        Color c = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> Color((</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">) opsToRedo[i][</FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">]); 
<FONT COLOR=0 STYLE="font-style:normal">1301 </FONT>        m_Points.addPoint(opsToRedo[i][</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">], opsToRedo[i][</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">], c); 
<FONT COLOR=0 STYLE="font-style:normal">1302 </FONT>        m_DrawingPanel.drawInstance((</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">) opsToRedo[i][</FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">], (</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000">) opsToRedo[i][</FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">], c); 
<FONT COLOR=0 STYLE="font-style:normal">1303 </FONT>      } 
<FONT COLOR=0 STYLE="font-style:normal">1304 </FONT>      </FONT><FONT COLOR="#808080"><I>//Podemos volver a deshacer la operación rehecha</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1305 </FONT>      newInsertionOp(opsToRedo.length); 
<FONT COLOR=0 STYLE="font-style:normal">1306 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1307 </FONT>      </FONT><FONT COLOR="#808080"><I>//Quitamos esta operación del buffer de redo</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1308 </FONT>      m_RedoBuffer.remove(m_RedoBuffer.size() - </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1309 </FONT>    } 
<FONT COLOR=0 STYLE="font-style:normal">1310 </FONT>    </FONT><FONT COLOR="#808080"><I>//Si el buffer de redo está vacío, deshabilitamos la operación</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1311 </FONT>    </FONT><FONT COLOR="#000080"><B>if</B></FONT><FONT COLOR="#000000"> (m_RedoBuffer.isEmpty()) 
<FONT COLOR=0 STYLE="font-style:normal">1312 </FONT>      m_RedoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1313 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1314 </FONT>    </FONT><FONT COLOR="#808080"><I>//Al menos hay una operación que deshacer</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1315 </FONT>    m_UndoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>true</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1316 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1317 </FONT>    </FONT><FONT COLOR="#808080"><I>//Actualizamos el texto de los botones de selección de color</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1318 </FONT>    updateColorSelectionButtonsText(); 
<FONT COLOR=0 STYLE="font-style:normal">1319 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1320 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1321 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1322 </FONT>   * Libera la memoria reservada por las operaciones de undo & redo, 
<FONT COLOR=0 STYLE="font-style:normal">1323 </FONT>   * deshabilitándolas de este modo 
<FONT COLOR=0 STYLE="font-style:normal">1324 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1325 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> flushRedoAndUndoBuffers(){ 
<FONT COLOR=0 STYLE="font-style:normal">1326 </FONT>    m_NumberOfInserted = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ArrayList(); 
<FONT COLOR=0 STYLE="font-style:normal">1327 </FONT>    m_RedoBuffer = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> ArrayList(); 
<FONT COLOR=0 STYLE="font-style:normal">1328 </FONT>    m_UndoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1329 </FONT>    m_RedoButton.setEnabled(</FONT><FONT COLOR="#000080"><B>false</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1330 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1331 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1332 </FONT>  </FONT><FONT COLOR="#808080"><I>//-----------------------------///////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1333 </FONT>  </FONT><FONT COLOR="#808080"><I>//------------------ ARBITRABLE IMPLEMENTATION ///////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1334 </FONT>  </FONT><FONT COLOR="#808080"><I>//-----------------------------///////////////////////////////////</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1335 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1336 </FONT>  </FONT><FONT COLOR="#808080"><I>//Private field which will be used to implement the Arbitable interface.</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1337 </FONT>  </FONT><FONT COLOR="#000080"><B>private</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Colleague.java.html">Colleague</A> m_Colleague = </FONT><FONT COLOR="#000080"><B>new</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Colleague.java.html">Colleague</A>(</FONT><FONT COLOR="#000080"><B>this</B></FONT><FONT COLOR="#000000">); 
<FONT COLOR=0 STYLE="font-style:normal">1338 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1339 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> <A href="..\..\oaidtb\misc\mediator\Arbitrable.java.html">Arbitrable</A> getColleague(){ 
<FONT COLOR=0 STYLE="font-style:normal">1340 </FONT>    </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000"> m_Colleague; 
<FONT COLOR=0 STYLE="font-style:normal">1341 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1342 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1343 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> addMediator(<A href="..\..\oaidtb\misc\mediator\Mediator.java.html">Mediator</A> mediator){ 
<FONT COLOR=0 STYLE="font-style:normal">1344 </FONT>    m_Colleague.addMediator(mediator); 
<FONT COLOR=0 STYLE="font-style:normal">1345 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1346 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1347 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> removeMediator(<A href="..\..\oaidtb\misc\mediator\Mediator.java.html">Mediator</A> mediator){ 
<FONT COLOR=0 STYLE="font-style:normal">1348 </FONT>    m_Colleague.removeMediator(mediator); 
<FONT COLOR=0 STYLE="font-style:normal">1349 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1350 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1351 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>void</B></FONT><FONT COLOR="#000000"> notifyMediators(</FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> whatChanged, Object object){ 
<FONT COLOR=0 STYLE="font-style:normal">1352 </FONT>    m_Colleague.notifyMediators(whatChanged, object); 
<FONT COLOR=0 STYLE="font-style:normal">1353 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1354 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1355 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> numberOfMediators(){ 
<FONT COLOR=0 STYLE="font-style:normal">1356 </FONT>    </FONT><FONT COLOR="#000080"><B>return</B></FONT><FONT COLOR="#000000"> m_Colleague.numberOfMediators(); 
<FONT COLOR=0 STYLE="font-style:normal">1357 </FONT>  } 
<FONT COLOR=0 STYLE="font-style:normal">1358 </FONT> 
<FONT COLOR=0 STYLE="font-style:normal">1359 </FONT>  </FONT><FONT COLOR="#808080"><I>// Change indicator constants</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1360 </FONT>  </FONT><FONT COLOR="#808080"><I>/** Indicador de mensaje para los mediadores, acompañado de la base de datos de puntos */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1361 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>static</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1362 </FONT>    INSTANCES_SPLIT = </FONT><FONT COLOR="#0000ff">0</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1363 </FONT>    INSTANCES_JOIN = </FONT><FONT COLOR="#0000ff">1</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1364 </FONT>    INSTANCES_DELETED = </FONT><FONT COLOR="#0000ff">2</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1365 </FONT>  </FONT><FONT COLOR="#808080"><I>/** 
<FONT COLOR=0 STYLE="font-style:normal">1366 </FONT>   * Indicador de mensaje para los mediadores, acompañado del nombre del archivo, en caso 
<FONT COLOR=0 STYLE="font-style:normal">1367 </FONT>   * de ser una operación de cagar/salvar una imagen, o del {</I></FONT><FONT COLOR="#808080"><B>@link</B></FONT><FONT COLOR="#808080"><I> File} utilizado, 
<FONT COLOR=0 STYLE="font-style:normal">1368 </FONT>   * en caso de ser una operación de cargar/salvar un archvo ARFF 
<FONT COLOR=0 STYLE="font-style:normal">1369 </FONT>   */</I></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1370 </FONT>  </FONT><FONT COLOR="#000080"><B>public</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>final</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>static</B></FONT><FONT COLOR="#000000"> </FONT><FONT COLOR="#000080"><B>int</B></FONT><FONT COLOR="#000000"> 
<FONT COLOR=0 STYLE="font-style:normal">1371 </FONT>    INSTANCES_LOAD_START = </FONT><FONT COLOR="#0000ff">20</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1372 </FONT>    INSTANCES_LOAD_FINISH = </FONT><FONT COLOR="#0000ff">21</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1373 </FONT>    INSTANCES_LOAD_FAIL = </FONT><FONT COLOR="#0000ff">22</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1374 </FONT>    INSTANCES_SAVE_START = </FONT><FONT COLOR="#0000ff">23</FONT><FONT COLOR="#000000">, 
<FONT COLOR=0 STYLE="font-style:normal">1375 </FONT>    INSTANCES_SAVE_FINISH = </FONT><FONT COLOR="#0000ff">24</FONT><FONT COLOR="#000000">; 
<FONT COLOR=0 STYLE="font-style:normal">1376 </FONT>}</FONT></PRE>
</BODY>
</HTML>